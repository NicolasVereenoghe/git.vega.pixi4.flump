(function(oa,C,La){function J(a,b){function c(){}c.prototype=a;var d=new c,g;for(g in b)d[g]=b[g];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function ua(a){return a instanceof Array?function(){return w.iter(a)}:"function"==typeof a.iterator?e(a,a.iterator):a.iterator}function e(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Ma++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},
c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var va=function(a,b){b=b.split("u").join("");this.r=new RegExp(a,b)};va.__name__=!0;va.prototype={replace:function(a,b){return a.replace(this.r,b)},__class__:va};var w=function(){};w.__name__=!0;w.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};w.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};w.indexOf=function(a,
b,c){var d=a.length;0>c&&(c+=d,0>c&&(c=0));for(;c<d;){if(a[c]===b)return c;c++}return-1};w.remove=function(a,b){var c=w.indexOf(a,b,0);if(-1==c)return!1;a.splice(c,1);return!0};w.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var W=function(){};W.__name__=!0;W.exists=function(a,b){for(var c=ua(a)();c.hasNext();){var d=c.next();if(b(d))return!0}return!1};W.foreach=function(a,b){for(var c=ua(a)();c.hasNext();){var d=
c.next();if(!b(d))return!1}return!0};W.fold=function(a,b,c){for(a=ua(a)();a.hasNext();){var d=a.next();c=b(d,c)}return c};W.find=function(a,b){for(var c=ua(a)();c.hasNext();){var d=c.next();if(b(d))return d}return null};var X=function(){this._animationFrameId=null;this.pixelRatio=1;this.set_skipFrame(!1);this.autoResize=!0;this.roundPixels=this.forceFXAA=this.antialias=this.transparent=!1;this.clearBeforeRender=!0;this.preserveDrawingBuffer=!1;this.backgroundColor=16777215;this.width=window.innerWidth;
this.height=window.innerHeight;this.set_fps(60)};X.__name__=!0;X.prototype={set_fps:function(a){this._frameCount=0;return 1<=a&&60>a?this.fps=a|0:this.fps=60},set_skipFrame:function(a){a&&(oa.log("pixi.plugins.app.Application > Deprecated: skipFrame - use fps property and set it to 30 instead"),this.set_fps(30));return this.skipFrame=a},_setDefaultValues:function(){this._animationFrameId=null;this.pixelRatio=1;this.set_skipFrame(!1);this.autoResize=!0;this.roundPixels=this.forceFXAA=this.antialias=
this.transparent=!1;this.clearBeforeRender=!0;this.preserveDrawingBuffer=!1;this.backgroundColor=16777215;this.width=window.innerWidth;this.height=window.innerHeight;this.set_fps(60)},start:function(a,b,c){null==a&&(a="auto");null==c?(this.canvas=window.document.createElement("canvas"),this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.position="absolute"):this.canvas=c;null==b?window.document.body.appendChild(this.canvas):b.appendChild(this.canvas);
this.stage=new PIXI.Container;c={};c.view=this.canvas;c.backgroundColor=this.backgroundColor;c.resolution=this.pixelRatio;c.antialias=this.antialias;c.forceFXAA=this.forceFXAA;c.autoResize=this.autoResize;c.transparent=this.transparent;c.clearBeforeRender=this.clearBeforeRender;c.preserveDrawingBuffer=this.preserveDrawingBuffer;this.renderer="auto"==a?PIXI.autoDetectRenderer(this.width,this.height,c):"canvas"==a?new PIXI.CanvasRenderer(this.width,this.height,c):new PIXI.WebGLRenderer(this.width,this.height,
c);this.roundPixels&&(this.renderer.roundPixels=!0);null==b?window.document.body.appendChild(this.renderer.view):b.appendChild(this.renderer.view);this.resumeRendering()},pauseRendering:function(){window.onresize=null;null!=this._animationFrameId&&(window.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null)},resumeRendering:function(){this.autoResize&&(window.onresize=e(this,this._onWindowResize));null==this._animationFrameId&&(this._animationFrameId=window.requestAnimationFrame(e(this,
this._onRequestAnimationFrame)))},_onWindowResize:function(a){this.width=window.innerWidth;this.height=window.innerHeight;this.renderer.resize(this.width,this.height);this.canvas.style.width=this.width+"px";this.canvas.style.height=this.height+"px";if(null!=this.onResize)this.onResize()},_onRequestAnimationFrame:function(a){this._frameCount++;if(this._frameCount==(60/this.fps|0)){this._frameCount=0;if(null!=this.onUpdate)this.onUpdate(a);this.renderer.render(this.stage)}this._animationFrameId=window.requestAnimationFrame(e(this,
this._onRequestAnimationFrame))},addStats:function(){null!=window.Perf&&(new l).addInfo(["UNKNOWN","WEBGL","CANVAS"][this.renderer.type]+" - "+this.pixelRatio)},__class__:X,__properties__:{set_fps:"set_fps",set_skipFrame:"set_skipFrame"}};var k=function(){this._debugCtrLine=0;this._borders=this._debugContainer=this._debugSwitchBt=this._debugClsBt=null;this.BORDER=2E3;this._EXT_HEIGHT=720;this._EXT_WIDTH=1136;this._MIN_HEIGHT=640;this._MIN_WIDTH=960;this.isFPSForced=!1;this.tmpFPS=-1;this.debugFontSize=
25;this.debugMotifs=null;this.debugLvl="WARNING";this.debugRGB="#444444";this.debug=this.debugVisibleInit=!1;X.call(this);k.instance=this;this.vars={};this.init()};k.__name__=!0;k.__super__=X;k.prototype=J(X.prototype,{getHit:function(){return this._hit},getContent:function(){return this._content},traceDebug:function(a,b){null==b&&(b=!1);var c;oa.log(a);if(this.debug){if(!b&&!this.detectDebugMotifIn(a))if("INFO"==this.debugLvl){if(-1==a.indexOf("INFO")&&-1==a.indexOf("WARNING")&&-1==a.indexOf("ERROR"))return}else if("WARNING"==
this.debugLvl){if(-1==a.indexOf("WARNING")&&-1==a.indexOf("ERROR"))return}else if("ERROR"==this.debugLvl&&-1==a.indexOf("ERROR"))return;null==this._debugContainer&&(this._debugContainer=this._container.addChild(new PIXI.Container),this._debugContainer.x=this._screenRect.x,this._debugContainer.y=this._screenRect.y,this._debugContainer.visible=this.debugVisibleInit,this._debugContainer.interactiveChildren=!1,this._debugSwitchBt=this._container.addChild(new PIXI.Container),this._debugSwitchBt.addChild(new PIXI.Graphics),
f.__cast(this._debugSwitchBt.getChildAt(0),PIXI.Graphics).beginFill(0,0),f.__cast(this._debugSwitchBt.getChildAt(0),PIXI.Graphics).drawRect(0,0,25,25),f.__cast(this._debugSwitchBt.getChildAt(0),PIXI.Graphics).endFill(),this._debugSwitchBt.x=this._screenRect.x,this._debugSwitchBt.y=this._screenRect.y,m.setQuickBt(this._debugSwitchBt,e(this,this.onBtSwitchTrace)),this._debugClsBt=this._container.addChild(new PIXI.Container),this._debugClsBt.addChild(new PIXI.Graphics),f.__cast(this._debugClsBt.getChildAt(0),
PIXI.Graphics).beginFill(0,0),f.__cast(this._debugClsBt.getChildAt(0),PIXI.Graphics).drawRect(0,-25,25,25),f.__cast(this._debugClsBt.getChildAt(0),PIXI.Graphics).endFill(),this._debugClsBt.x=this._screenRect.x,this._debugClsBt.y=this._screenRect.y+this._screenRect.height,m.setQuickBt(this._debugClsBt,e(this,this.onBtClsTrace)));c=new PIXI.Text(a,{fontFamily:"Arial",fontSize:this.debugFontSize,fill:this.debugRGB});this._debugContainer.addChild(c);this._debugCtrLine++;c.y=-(this._debugCtrLine-1)*this.debugFontSize;
for(this._debugContainer.y=this._screenRect.y+(this._debugCtrLine-1)*this.debugFontSize;this._debugContainer.children.length>Math.ceil(this._EXT_HEIGHT/this.debugFontSize);)this._debugContainer.removeChildAt(0).destroy()}},onBtSwitchTrace:function(a){this._debugContainer.visible=!this._debugContainer.visible},onBtClsTrace:function(a){for(this._debugCtrLine=0;0<this._debugContainer.children.length;)this._debugContainer.removeChildAt(0).destroy()},detectDebugMotifIn:function(a){if(null!=this.debugMotifs&&
0<this.debugMotifs.length)for(var b=0,c=this.debugMotifs;b<c.length;){var d=c[b];++b;if(-1!=a.indexOf(d))return!0}return!1},getScreenRectExt:function(){return new PIXI.Rectangle(-this._EXT_WIDTH/2,-this._EXT_HEIGHT/2,this._EXT_WIDTH,this._EXT_HEIGHT)},getScreenRectMin:function(){return new PIXI.Rectangle(-this._MIN_WIDTH/2,-this._MIN_HEIGHT/2,this._MIN_WIDTH,this._MIN_HEIGHT)},getScreenRect:function(){return this._screenRect},setFPS:function(a){this.tmpFPS=a;this.isFPSForced||this.set_fps(a)},restaureFPS:function(){this.isFPSForced=
!1;this.set_fps(this.tmpFPS)},forceFPS:function(a){this.isFPSForced=!0;this.set_fps(a)},reload:function(){if("undefined"!=typeof window){try{this.traceDebug("WARNING : ApplicationMatchSize::reload");for(var a=0,b=H.fields(PIXI.utils.TextureCache);a<b.length;){var c=b[a];++a;H.field(PIXI.utils.TextureCache,c).destroy(!0)}}catch(d){d instanceof x&&(d=d.val),this.traceDebug("ERROR : ApplicationMatchSize::reload : clear textures failure")}this.stage.interactiveChildren=!1;this.stage.interactive=!1;window.document.location.reload(!0);
return!0}this.traceDebug("ERROR : ApplicationMatchSize::reload : no browser, fail");return!1},refreshRender:function(){this.renderer.resize(1,1);this._onWindowResize(null)},refreshInteraction:function(){this.pauseRendering();this.resumeRendering()},init:function(){var a,b;if("undefined"!=typeof window){a=window.location.search.substring(1).split("&");for(var c=0;c<a.length;)b=a[c],++c,b=b.split("="),this.vars[b[0]]=b[1]}this.backgroundColor=this.getStageBGColor();try{PIXI.glCore.VertexArrayObject.FORCE_NATIVE=
!0}catch(d){d instanceof x&&(d=d.val),oa.log(d)}this.start();this._hit=this.stage.addChild(new PIXI.Container);a=this._hit.addChild(new PIXI.Graphics);a.beginFill(0,0);a.drawRect(-100,-100,200,200);a.endFill();this._hit.interactive=!0;this._container=new PIXI.Container;this.stage.addChild(this._container);this._bg=new PIXI.Graphics;this._bg.beginFill(this.getBGColor());this._bg.drawRect(-this._EXT_WIDTH/2,-this._EXT_HEIGHT/2,this._EXT_WIDTH,this._EXT_HEIGHT);this._bg.endFill();this._container.addChild(this._bg);
this._content=new PIXI.Container;this._container.addChild(this._content);this.onResize=e(this,this.updateSize);this.updateSize()},getBGColor:function(){return 16777215},getStageBGColor:function(){return 0},updateSize:function(){var a=this.width,b=a*this._MIN_HEIGHT/this._MIN_WIDTH;b>this.height&&(a=this.height*this._MIN_WIDTH/this._MIN_HEIGHT);this._baseScale=a/this._MIN_WIDTH;this._container.scale.x=this._baseScale;this._container.scale.y=this._baseScale;this._container.x=this.width/2;this._container.y=
this.height/2;this._hit.scale.x=this._baseScale;this._hit.scale.y=this._baseScale;this._hit.x=this.width/2;this._hit.y=this.height/2;f.__cast(this._hit.getChildAt(0),PIXI.Graphics).width=this.width/this._baseScale;f.__cast(this._hit.getChildAt(0),PIXI.Graphics).height=this.height/this._baseScale;a=Math.min(this.width/this._baseScale,this._EXT_WIDTH);b=Math.min(this.height/this._baseScale,this._EXT_HEIGHT);this._screenRect=new PIXI.Rectangle(-a/2,-b/2,a,b);null==this._borders&&(this._borders=new PIXI.Graphics,
this._borders.beginFill(this.backgroundColor),this._borders.drawRect(-this._EXT_WIDTH/2-this.BORDER,-this._EXT_HEIGHT/2-this.BORDER,this.BORDER,this._EXT_HEIGHT+2*this.BORDER),this._borders.drawRect(-this._EXT_WIDTH/2-this.BORDER,-this._EXT_HEIGHT/2-this.BORDER,this._EXT_WIDTH+2*this.BORDER,this.BORDER),this._borders.drawRect(-this._EXT_WIDTH/2-this.BORDER,this._EXT_HEIGHT/2,this._EXT_WIDTH+2*this.BORDER,this.BORDER),this._borders.drawRect(this._EXT_WIDTH/2,-this._EXT_HEIGHT/2-this.BORDER,this.BORDER,
this._EXT_HEIGHT+2*this.BORDER),this._borders.endFill(),this._container.addChild(this._borders));null!=this._debugContainer&&(this._debugContainer.x=this._screenRect.x,this._debugContainer.y=this._screenRect.y+(this._debugCtrLine-1)*this.debugFontSize,this._debugSwitchBt.x=this._screenRect.x,this._debugSwitchBt.y=this._screenRect.y,this._debugClsBt.x=this._screenRect.x,this._debugClsBt.y=this._screenRect.y+this._screenRect.height);ca.getInstance().broadcastResize()},__class__:k});var ha=function(){k.call(this);
this.loader=new PIXI.loaders.Loader;this.loader.add("","assets/assetsTest/library.json?v=5");this.loader.after(wa.parse(1));this.loader.load(e(this,this.onLoadComplete))};ha.__name__=!0;ha.main=function(){new ha};ha.__super__=k;ha.prototype=J(k.prototype,{onLoadComplete:function(){this.loader.removeAllListeners();this.getContent().addChild(new q("test"));this.onUpdate=e(this,this.doUpdate)},doUpdate:function(a){f.__cast(this.getContent().getChildAt(0),q).getLayer("cube").y=150*Math.cos(2*Math.PI*
a/1E3)+100},__class__:ha});Math.__name__=!0;var l=C.Perf=function(a,b){null==b&&(b=0);null==a&&(a="TR");this._perfObj=window.performance;null!=H.field(this._perfObj,"memory")&&(this._memoryObj=H.field(this._perfObj,"memory"));this._memCheck=null!=this._perfObj&&null!=this._memoryObj&&0<this._memoryObj.totalJSHeapSize;this._pos=a;this._offset=b;this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=
this._fpsMin=60;null!=this._perfObj&&null!=(z=this._perfObj,e(z,z.now))?this._startTime=this._perfObj.now():this._startTime=(new Date).getTime();this._prevTime=-l.MEASUREMENT_INTERVAL;this._createFpsDom();this._createMsDom();this._memCheck&&this._createMemoryDom();null!=(z=window,e(z,z.requestAnimationFrame))?this.RAF=(z=window,e(z,z.requestAnimationFrame)):null!=window.mozRequestAnimationFrame?this.RAF=window.mozRequestAnimationFrame:null!=window.webkitRequestAnimationFrame?this.RAF=window.webkitRequestAnimationFrame:
null!=window.msRequestAnimationFrame&&(this.RAF=window.msRequestAnimationFrame);null!=(z=window,e(z,z.cancelAnimationFrame))?this.CAF=(z=window,e(z,z.cancelAnimationFrame)):null!=window.mozCancelAnimationFrame?this.CAF=window.mozCancelAnimationFrame:null!=window.webkitCancelAnimationFrame?this.CAF=window.webkitCancelAnimationFrame:null!=window.msCancelAnimationFrame&&(this.CAF=window.msCancelAnimationFrame);null!=this.RAF&&(this._raf=H.callMethod(window,this.RAF,[e(this,this._tick)]))};l.__name__=
!0;l.prototype={_init:function(){this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=this._fpsMin=60;null!=this._perfObj&&null!=(z=this._perfObj,e(z,z.now))?this._startTime=this._perfObj.now():this._startTime=(new Date).getTime();this._prevTime=-l.MEASUREMENT_INTERVAL},_now:function(){return null!=this._perfObj&&null!=(z=this._perfObj,e(z,z.now))?this._perfObj.now():(new Date).getTime()},_tick:function(a){var b;
b=null!=this._perfObj&&null!=(z=this._perfObj,e(z,z.now))?this._perfObj.now():(new Date).getTime();this._ticks++;null!=this._raf&&b>this._prevTime+l.MEASUREMENT_INTERVAL&&(this.currentMs=Math.round(b-this._startTime),this.ms.innerHTML="MS: "+this.currentMs,this.currentFps=Math.round(1E3*this._ticks/(b-this._prevTime)),0<this.currentFps&&a>l.DELAY_TIME&&(this._measureCount++,this._totalFps+=this.currentFps,this.lowFps=this._fpsMin=Math.min(this._fpsMin,this.currentFps),this._fpsMax=Math.max(this._fpsMax,
this.currentFps),this.avgFps=Math.round(this._totalFps/this._measureCount)),this.fps.innerHTML="FPS: "+this.currentFps+" ("+this._fpsMin+"-"+this._fpsMax+")",this.fps.style.backgroundColor=30<=this.currentFps?l.FPS_BG_CLR:15<=this.currentFps?l.FPS_WARN_BG_CLR:l.FPS_PROB_BG_CLR,this._prevTime=b,this._ticks=0,this._memCheck&&(this.currentMem=this._getFormattedSize(this._memoryObj.usedJSHeapSize,2),this.memory.innerHTML="MEM: "+this.currentMem));this._startTime=b;null!=this._raf&&(this._raf=H.callMethod(window,
this.RAF,[e(this,this._tick)]))},_createDiv:function(a,b){null==b&&(b=0);var c;c=window.document.createElement("div");c.id=a;c.className=a;c.style.position="absolute";switch(this._pos){case "TL":c.style.left=this._offset+"px";c.style.top=b+"px";break;case "TR":c.style.right=this._offset+"px";c.style.top=b+"px";break;case "BL":c.style.left=this._offset+"px";c.style.bottom=(this._memCheck?48:32)-b+"px";break;case "BR":c.style.right=this._offset+"px",c.style.bottom=(this._memCheck?48:32)-b+"px"}c.style.width=
"80px";c.style.height="12px";c.style.lineHeight="12px";c.style.padding="2px";c.style.fontFamily=l.FONT_FAMILY;c.style.fontSize="9px";c.style.fontWeight="bold";c.style.textAlign="center";window.document.body.appendChild(c);return c},_createFpsDom:function(){this.fps=this._createDiv("fps");this.fps.style.backgroundColor=l.FPS_BG_CLR;this.fps.style.zIndex="995";this.fps.style.color=l.FPS_TXT_CLR;this.fps.innerHTML="FPS: 0"},_createMsDom:function(){this.ms=this._createDiv("ms",16);this.ms.style.backgroundColor=
l.MS_BG_CLR;this.ms.style.zIndex="996";this.ms.style.color=l.MS_TXT_CLR;this.ms.innerHTML="MS: 0"},_createMemoryDom:function(){this.memory=this._createDiv("memory",32);this.memory.style.backgroundColor=l.MEM_BG_CLR;this.memory.style.color=l.MEM_TXT_CLR;this.memory.style.zIndex="997";this.memory.innerHTML="MEM: 0"},_getFormattedSize:function(a,b){null==b&&(b=0);if(0==a)return"0";var c=Math.pow(10,b),d=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a*c/Math.pow(1024,d))/c+" "+["Bytes","KB",
"MB","GB","TB"][d]},addInfo:function(a){this.info=this._createDiv("info",this._memCheck?48:32);this.info.style.backgroundColor=l.INFO_BG_CLR;this.info.style.color=l.INFO_TXT_CLR;this.info.style.zIndex="998";this.info.innerHTML=a},clearInfo:function(){null!=this.info&&(window.document.body.removeChild(this.info),this.info=null)},destroy:function(){H.callMethod(window,this.CAF,[this._raf]);this._memoryObj=this._perfObj=this._raf=null;null!=this.fps&&(window.document.body.removeChild(this.fps),this.fps=
null);null!=this.ms&&(window.document.body.removeChild(this.ms),this.ms=null);null!=this.memory&&(window.document.body.removeChild(this.memory),this.memory=null);this.clearInfo();this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=this._fpsMin=60;null!=this._perfObj&&null!=(z=this._perfObj,e(z,z.now))?this._startTime=this._perfObj.now():this._startTime=(new Date).getTime();this._prevTime=-l.MEASUREMENT_INTERVAL},
_cancelRAF:function(){H.callMethod(window,this.CAF,[this._raf]);this._raf=null},__class__:l};var H=function(){};H.__name__=!0;H.field=function(a,b){try{return a[b]}catch(c){return c instanceof x&&(c=c.val),null}};H.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};H.callMethod=function(a,b,c){return b.apply(a,c)};H.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=
d&&c.call(a,d)&&b.push(d)}return b};var F=function(){};F.__name__=!0;F.string=function(a){return f.__string_rec(a,"")};F["int"]=function(a){return a|0};F.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=w.cca(a,1)&&88!=w.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var xa=function(){};xa.__name__=!0;xa.replace=function(a,b,c){return a.split(b).join(c)};var ya=function(){};ya.__name__=!0;ya.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],
b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw new x("Too many arguments");}};var D={__name__:!0,gt:function(a,b){var c=0>a;return c!=0>b?c:a>b},gte:function(a,b){var c=0>a;return c!=0>b?c:a>=b},toFloat:function(a){return 0>a?4294967296+
a:a+0}},pa=function(a){this.symbolId=a};pa.__name__=!0;pa.prototype={__class__:pa};C=function(){};C.__name__=!0;C.prototype={__class__:C};var za=function(a,b,c){this.position=0;this.dirty=this.fullyGenerated=!1;this.changed=0;this.labelsToFire=[];this.childPlayers=new K;this.createdChildren=new K;this.currentChildrenKey=new K;this.STATE_STOPPED="stopped";this.STATE_LOOPING="looping";this.STATE_PLAYING="playing";this.independantTimeline=this.independantControl=!0;this.prevPosition=-1;this.elapsed=
this.previousElapsed=this.advanced=0;this.symbol=a;this.movie=b;this.resolution=c;c=0;for(var d=a.layers;c<d.length;){var g=d[c];++c;b.createLayer(g)}this.state=this.STATE_LOOPING;this.advanceTime(0);c=0;for(a=a.layers;c<a.length;)d=a[c],++c,b.setMask(d)};za.__name__=!0;za.prototype={get_labels:function(){return this.symbol.labels.iterator()},getDisplayKey:function(a,b){null==b&&(b=0);var c=this.symbol.getLayer(a);if(null==c)throw new x("Layer "+a+" does not exist.");c=c.getKeyframeForFrame(b);if(null==
c)throw new x("Keyframe does not exist at index "+F.string(D.toFloat(b)));this.createChildIfNessessary(c);return c.displayKey},reset:function(){this.previousElapsed=this.elapsed=0;this.prevPosition=-1},get_position:function(){var a=(this.elapsed%this.symbol.duration+this.symbol.duration)%this.symbol.duration,b;return this.state==this.STATE_PLAYING?(b=this.symbol.duration-this.symbol.library.frameTime,this.elapsed>=b?b:a):a},get_totalFrames:function(){return this.symbol.totalFrames},play:function(){this.setState(this.STATE_PLAYING);
return this},loop:function(){this.setState(this.STATE_LOOPING);return this},stop:function(){this.setState(this.STATE_STOPPED);return this},goToLabel:function(a){if(!this.labelExists(a))throw new x("Symbol "+this.symbol.name+" does not have label "+a+".");this.set_currentFrame(this.getLabelFrame(a));this.fireHitFrames(this.getLabelFrame(a));return this},goToFrame:function(a){this.set_currentFrame(a);this.fireHitFrames(a);return this},fireHitFrames:function(a){this.changed++;var b=this.changed;a*=this.symbol.library.frameTime;
for(var c=0,d=this.symbol.layers;c<d.length;){var g=d[c];++c;for(var N=0,g=g.keyframes;N<g.length;){var f=g[N];++N;if(b!=this.changed)return;null!=f.label&&f.timeInside(a)&&this.movie.labelHit(f.label)}}},goToPosition:function(a){this.previousElapsed=this.elapsed=a;this.clearLabels();return this},get_playing:function(){return this.state==this.STATE_PLAYING},get_looping:function(){return this.state==this.STATE_LOOPING},get_stopped:function(){return this.state==this.STATE_STOPPED},getLabelFrame:function(a){if(!this.labelExists(a))throw new x("Symbol "+
this.symbol.name+" does not have label "+a+".");return this.symbol.labels.get(a).keyframe.index},get_currentFrame:function(){return F["int"](this.get_position()/this.symbol.library.frameTime)},set_currentFrame:function(a){this.goToPosition(this.symbol.library.frameTime*a);return a},labelExists:function(a){return this.symbol.labels.exists(a)},advanceTime:function(a){if(this.state!=this.STATE_STOPPED)for(this.elapsed+=a;0>this.elapsed;)this.elapsed+=this.symbol.duration,this.previousElapsed+=this.symbol.duration;
this.advanced+=a;this.state!=this.STATE_STOPPED&&this.fireLabels();this.render()},clearLabels:function(){for(;0<this.labelsToFire.length;)this.labelsToFire.pop()},fireLabels:function(){if(null!=this.symbol.firstLabel&&!(this.previousElapsed>this.elapsed)){var a;a=this.previousElapsed<=this.elapsed?this.symbol.firstLabel:this.symbol.lastLabel;for(var b=!0;b;)a.keyframe.time>this.previousElapsed%this.symbol.duration?b=!1:(D.gte(a.keyframe.index,a.next.keyframe.index)&&(b=!1),a=a.next);for(b=a;null!=
a;)a.keyframe.insideRangeStart(this.previousElapsed%this.symbol.duration,this.elapsed%this.symbol.duration)&&this.state!=this.STATE_STOPPED&&this.labelsToFire.push(a),a=a.next,a==b&&(a=null);for(;0<this.labelsToFire.length;)a=this.labelsToFire.shift(),this.movie.labelPassed(a)}},render:function(){var a=!0,b=null,c=-1,d=-1;this.state==this.STATE_PLAYING&&this.get_position()>=this.symbol.duration-this.symbol.library.frameTime&&(this.elapsed=this.symbol.duration-this.symbol.library.frameTime,this.stop(),
this.movie.onAnimationComplete());this.get_position()!=this.prevPosition&&(0>this.prevPosition||D.gt(this.get_totalFrames(),1))?this.prevPosition=this.get_position():a=!1;for(var g=0,N=this.symbol.layers;g<N.length;){var A=N[g];++g;var p=A.getKeyframeForTime(this.get_position());if(1==p.isEmpty)this.removeChildIfNessessary(p);else if(0==p.isEmpty){if(a){c=this.getInterpolation(p,this.get_position());b=p.next;b.isEmpty&&(b=p);if(p.tintColor!=b.tintColor)var e=p.tintColor,d=b.tintColor,h=e>>16&255,
k=e>>8&255,e=e&255,d=Math.round(h+((d>>16&255)-h)*c)<<16|Math.round(k+((d>>8&255)-k)*c)<<8|Math.round(e+((d&255)-e)*c);else d=p.tintColor;this.currentChildrenKey.h[A.__id__]!=p.displayKey&&(this.createChildIfNessessary(p),this.removeChildIfNessessary(p),this.addChildIfNessessary(p))}f.__instanceof(p.symbol,ia)&&(A=this.movie.getChildPlayer(p),A.independantTimeline?A.advanceTime(this.advanced):(A.elapsed=this.get_position(),A.render()));a&&this.movie.renderFrame(p,p.location.x+(b.location.x-p.location.x)*
c,p.location.y+(b.location.y-p.location.y)*c,p.scale.x+(b.scale.x-p.scale.x)*c,p.scale.y+(b.scale.y-p.scale.y)*c,p.skew.x+(b.skew.x-p.skew.x)*c,p.skew.y+(b.skew.y-p.skew.y)*c,p.alpha+(b.alpha-p.alpha)*c,p.tintMultiplier+(b.tintMultiplier-p.tintMultiplier)*c,d)}}this.advanced=0;this.previousElapsed=this.elapsed},createChildIfNessessary:function(a){a.isEmpty||null!=this.createdChildren.h.__keys__[a.displayKey.__id__]!=0||(this.movie.createFlumpChild(a.displayKey),this.createdChildren.set(a.displayKey,
!0),!0)},removeChildIfNessessary:function(a){null!=this.currentChildrenKey.h.__keys__[a.layer.__id__]&&(this.movie.removeFlumpChild(a.layer,a.displayKey),this.currentChildrenKey.remove(a.layer))},addChildIfNessessary:function(a){if(!a.isEmpty){var b=a.displayKey;this.currentChildrenKey.set(a.layer,b);b;this.movie.addFlumpChild(a.layer,a.displayKey)}},setState:function(a){this.state=a;for(var b=0,c=this.symbol.layers;b<c.length;){var d=c[b];++b;d=d.getKeyframeForTime(this.get_position());this.createChildIfNessessary(d);
f.__instanceof(d.symbol,ia)&&(d=this.movie.getChildPlayer(d),0==d.independantControl&&d.setState(a))}this.advanceTime(0)},timeForLabel:function(a){return this.symbol.labels.get(a).keyframe.time},getInterpolation:function(a,b){if(0==a.tweened)return 0;var c=(b-a.time)/a.duration,d=a.ease;if(0!=d){var g;0>d?(g=1-c,g=1-g*g,d=-d):g=c*c;c=d*g+(1-d)*c}return c},__class__:za,__properties__:{set_currentFrame:"set_currentFrame",get_currentFrame:"get_currentFrame",get_stopped:"get_stopped",get_looping:"get_looping",
get_playing:"get_playing",get_totalFrames:"get_totalFrames",get_position:"get_position",get_labels:"get_labels"}};var qa=function(a,b){null==b&&(b=1);this.color=a;this.multiplier=b;this.uniforms={color:{type:"v3",value:this.hex2v3(this.color)},multiplier:{type:"1f",value:this.multiplier}};PIXI.Filter.call(this,null,this.getFragmentSrc(),this.uniforms)};qa.__name__=!0;qa.__super__=PIXI.Filter;qa.prototype=J(PIXI.Filter.prototype,{getFragmentSrc:function(){var a;a="precision mediump float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform vec3 color;uniform float multiplier;void main () { gl_FragColor = texture2D(uSampler, vTextureCoord);";
a+="gl_FragColor.r = (color.r*multiplier+gl_FragColor.r*(1.0-multiplier)) * gl_FragColor.a;";a+="gl_FragColor.g = (color.g*multiplier+gl_FragColor.g*(1.0-multiplier)) * gl_FragColor.a;";a+="gl_FragColor.b = (color.b*multiplier+gl_FragColor.b*(1.0-multiplier)) * gl_FragColor.a;";return a+="}"},hex2v3:function(a){return{x:D.toFloat(a>>16&255)/D.toFloat(255),y:D.toFloat(a>>8&255)/D.toFloat(255),z:D.toFloat(a&255)/D.toFloat(255)}},update:function(a,b){null==b&&(b=1);this.uniforms.color.value=this.hex2v3(this.color=
a);this.uniforms.multiplier.value=this.multiplier=b},__class__:qa});var fa=function(a){this.atlases=[];this.sprites=new y;this.movies=new y;this.resolution=a};fa.__name__=!0;fa.create=function(a,b){var c=new y,d=new y,g=new fa(b);g.sprites=c;g.movies=d;g.framerate=D.toFloat(a.frameRate);g.frameTime=1E3/g.framerate;g.md5=a.md5;for(var N=[],A=null,p=0,e=a.textureGroups;p<e.length;){var h=e[p];++p;D.toFloat(h.scaleFactor)>=b&&null==A&&(A=h)}null==A&&(A=a.textureGroups[a.textureGroups.length-1]);p=0;
for(A=A.atlases;p<A.length;)e=A[p],++p,g.atlases.push(e),N.push(e);for(A=0;A<N.length;)for(e=N[A],++A,p=0,e=e.textures;p<e.length;){h=e[p];++p;new Aa(h.rect[0],h.rect[1],h.rect[2],h.rect[3]);var k=new S(h.origin[0],h.origin[1]),n=new la;n.name=h.symbol;n.data=h.data;n.baseClass=h.baseClass;n.origin=k;n.texture=h.symbol;c.set(n.name,n);n}N=new K;A=0;for(p=a.movies;A<p.length;){k=p[A];++A;e=new ia;e.name=k.id;e.data=k.data;e.baseClass=k.baseClass;e.library=g;h=0;for(k=k.layers;h<k.length;){var m=k[h];
++h;n=new Ba(m.name);n.movie=e;n.mask=m.mask;for(var l=null,B=0,m=m.keyframes;B<m.length;){var v=m[B];++B;var r=new Ca;r.prev=l;null!=l&&(l.next=r);r.layer=n;r.numFrames=v.duration;r.duration=D.toFloat(v.duration)*g.frameTime;r.index=v.index;l=D.toFloat(r.index)*g.frameTime;l*=10;l=Math.floor(l);l/=10;r.time=l;null==v.ref?r.isEmpty=!0:(r.isEmpty=!1,r.symbolId=v.ref,r.pivot=null==v.pivot?new S(0,0):new S(v.pivot[0]*b,v.pivot[1]*b),r.location=null==v.loc?new S(0,0):new S(v.loc[0]*b,v.loc[1]*b),r.tweened=
0==v.tweened?!1:!0,r.symbol=null,r.scale=null==v.scale?new S(1,1):new S(v.scale[0],v.scale[1]),r.skew=null==v.skew?new S(0,0):new S(v.skew[0],v.skew[1]),r.alpha=null==v.alpha?1:v.alpha,r.tintMultiplier=null==v.tint?0:v.tint[0],r.tintColor=null==v.tint?0:F.parseInt(xa.replace(f.__cast(v.tint[1],String),"#","0x")),r.data=v.data,r.ease=null==v.ease?0:v.ease);0==n.keyframes.length&&(n.firstKeyframe=r);null!=v.label&&(r.label=new ja,r.label.keyframe=r,r.label.name=v.label,e.labels.set(r.label.name,r.label));
l=v.ref;N.set(r,l);l;n.keyframes.push(r);l=r}n.lastKeyframe=n.keyframes[n.keyframes.length-1];n.keyframes[0].prev=n.lastKeyframe;n.lastKeyframe.next=n.keyframes[0];e.layers.push(n);if(!W.foreach(n.keyframes,function(){return function(a){return a.isEmpty}}())){B=0;for(m=n.keyframes;B<m.length;)if(r=[m[B]],++B,W.exists(n.keyframes,function(a){return function(b){return 0==b.isEmpty&&b!=a[0]}}(r))){for(l=r[0].prev;l.isEmpty;)l=l.prev;r[0].prevNonEmptyKeyframe=l;for(l=r[0].next;l.isEmpty;)l=l.next;r[0].nextNonEmptyKeyframe=
l}else r[0].prevNonEmptyKeyframe=r[0],r[0].nextNonEmptyKeyframe=r[0];n=W.find(n.keyframes,function(){return function(a){return 0==a.isEmpty}}());null!=n&&(n.displayKey=new pa(n.symbolId));for(B=n.nextNonEmptyKeyframe;B!=n;)B.displayKey=B.symbolId==B.prevNonEmptyKeyframe.symbolId?B.prevNonEmptyKeyframe.displayKey:new pa(B.symbolId),B=B.nextNonEmptyKeyframe}}h=function(){return function(a,b){var c=a.lastKeyframe.index+a.lastKeyframe.numFrames;return D.gt(c,b)?c:b}}();e.totalFrames=W.fold(e.layers,h,
0);e.duration=D.toFloat(e.totalFrames)*g.frameTime;h=[];k=0;for(n=e.layers;k<n.length;)for(m=n[k],++k,B=0,m=m.keyframes;B<m.length;)r=m[B],++B,null!=r.label&&h.push(r.label);E.sort(h,fa.sortLabel);k=0;for(n=h.length;k<n;)m=k++,B=m+1,B>=h.length&&(B=0),m=h[m],B=h[B],m.next=B,B.prev=m;e.firstLabel=h[0];e.lastLabel=h[h.length-1];d.set(e.name,e);e}for(A=N.keys();A.hasNext();)p=A.next(),e=N.h[p.__id__],null!=(null!=I[e]?c.getReserved(e):c.h[e])?p.symbol=null!=I[e]?c.getReserved(e):c.h[e]:p.symbol=null!=
I[e]?d.getReserved(e):d.h[e];return g};fa.sortLabel=function(a,b){return D.gt(b.keyframe.index,a.keyframe.index)?-1:D.gt(a.keyframe.index,b.keyframe.index)?1:0};fa.prototype={__class__:fa};var Ca=function(){};Ca.__name__=!0;Ca.prototype={timeInside:function(a){return this.time<=a&&this.time+this.duration>a},rangeInside:function(a,b){return this.timeInside(a)&&this.timeInside(b)},rangeIntersect:function(a,b){return this.timeInside(a)||this.timeInside(b)},insideRangeStart:function(a,b){return a<=b?
this.time>a&&this.time<=b:this.time>a||this.time<=b},insideRangeEnd:function(a,b){return a==b&&b==this.time+this.duration?!0:a>b?b<=this.time+this.duration&&a>this.time+this.duration:b<=this.time+this.duration||a>this.time+this.duration},__class__:Ca};var ja=function(){};ja.__name__=!0;ja.prototype={__class__:ja};var Ba=function(a){this.keyframes=[];this.name=a};Ba.__name__=!0;Ba.prototype={getKeyframeForFrame:function(a){for(var b=0,c=this.keyframes;b<c.length;){var d=c[b];++b;if(D.gte(a,d.index)&&
D.gt(d.index+d.numFrames,a))return d}return null},getKeyframeForTime:function(a){for(var b=this.lastKeyframe;b.time>a%this.movie.duration;)b=b.prev;return b},__class__:Ba};var O=function(){};O.__name__=!0;O.prototype={__class__:O};var ia=function(){this.labels=new y;this.layers=[]};ia.__name__=!0;ia.__super__=O;ia.prototype=J(O.prototype,{getLayer:function(a){for(var b=0,c=this.layers;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null},debug:function(){var a=W.fold(this.layers,function(a,
b){return a.name.length>b?a.name.length:b},0),b=function(a,b){for(var c="";0<b;)c+=a,b--;return c},c;c="asdfsadf\n"+b(" ",a);c+="   ";for(var d=0,g=this.totalFrames;d<g;){var e=d++;if(0==e%5)c+=e;else if(0!=e%6||10>e)c+=" "}c=c+"\n"+b(" ",a);c+="   ";d=0;for(g=this.totalFrames;d<g;)c=0==d++%5?c+"\u25bd":c+" ";c+="\n";d=0;for(g=this.layers.length;d<g;){var e=d++,f=this.layers[e];c+=f.name+b(" ",a-f.name.length);c+=" : ";e=0;for(f=f.keyframes;e<f.length;){var h=f[e];++e;null!=h.symbolId?(c+="\u25d9",
c=h.tweened?c+b("\u25b8",h.numFrames-1):c+b("\u25c9",h.numFrames-1)):(c+="\u25cb",c+=b("\u25cc",h.numFrames-1))}c+="\n"}return c},__class__:ia});var S=function(a,b){this.x=a;this.y=b};S.__name__=!0;S.prototype={__class__:S};var Aa=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};Aa.__name__=!0;Aa.prototype={__class__:Aa};var la=function(){};la.__name__=!0;la.__super__=O;la.prototype=J(O.prototype,{__class__:la});O=function(){};O.__name__=!0;O.prototype={__class__:O};var E=function(){};
E.__name__=!0;E.sort=function(a,b){E.rec(a,b,0,a.length)};E.rec=function(a,b,c,d){var g=c+d>>1;if(12>d-c){if(!(d<=c))for(g=c+1;g<d;)for(var e=g++;e>c;){if(0>b(a[e],a[e-1]))E.swap(a,e-1,e);else break;e--}}else E.rec(a,b,c,g),E.rec(a,b,g,d),E.doMerge(a,b,c,g,d,g-c,d-g)};E.doMerge=function(a,b,c,d,g,e,f){var h,k,l,m;0!=e&&0!=f&&(2==e+f?0>b(a[d],a[c])&&E.swap(a,d,c):(e>f?(l=e>>1,h=c+l,k=E.lower(a,b,d,g,h),m=k-d):(m=f>>1,k=d+m,h=E.upper(a,b,c,d,k),l=h-c),E.rotate(a,b,h,d,k),d=h+m,E.doMerge(a,b,c,h,d,l,
m),E.doMerge(a,b,d,k,g,e-l,f-m)))};E.rotate=function(a,b,c,d,g){if(c!=d&&d!=g)for(b=E.gcd(g-c,d-c);0!=b--;){for(var e=a[c+b],f=d-c,h=c+b,k=c+b+f;k!=c+b;)a[h]=a[k],h=k,k=g-k>f?k+f:c+(f-(g-k));a[h]=e}};E.gcd=function(a,b){for(;0!=b;){var c=a%b;a=b;b=c}return a};E.upper=function(a,b,c,d,g){d-=c;for(var e,f;0<d;)e=d>>1,f=c+e,0>b(a[g],a[f])?d=e:(c=f+1,d=d-e-1);return c};E.lower=function(a,b,c,d,g){d-=c;for(var e,f;0<d;)e=d>>1,f=c+e,0>b(a[f],a[g])?(c=f+1,d=d-e-1):d=e;return c};E.swap=function(a,b,c){var d=
a[b];a[b]=a[c];a[c]=d};var K=function(){this.h={};this.h.__keys__={}};K.__name__=!0;K.__interfaces__=[O];K.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++K.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return w.iter(a)},iterator:function(){return{ref:this.h,
it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a.__id__]}}},__class__:K};var Da=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};Da.__name__=!0;Da.prototype={hasNext:function(){return this.index<this.count},next:function(){return this.map.get(this.keys[this.index++])},__class__:Da};var y=function(){this.h={}};y.__name__=!0;y.__interfaces__=[O];y.prototype={set:function(a,b){null!=I[a]?this.setReserved(a,b):this.h[a]=
b},get:function(a){return null!=I[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=I[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=I[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a]}return!0},keys:function(){var a=this.arrayKeys();return w.iter(a)},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Da(this,this.arrayKeys())},__class__:y};var x=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,x)};x.__name__=!0;x.__super__=Error;x.prototype=J(Error.prototype,
{__class__:x});var f=function(){};f.__name__=!0;f.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=f.__nativeClassName(a);return null!=a?f.__resolveNativeClass(a):null};f.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=
2,g=a.length;d<g;)var e=d++,c=2!=e?c+(","+f.__string_rec(a[e],b)):c+f.__string_rec(a[e],b);return c+")"}c=a.length;d="[";b+="\t";for(g=0;g<c;)e=g++,d+=(0<e?",":"")+f.__string_rec(a[e],b);return d+"]"}try{d=a.toString}catch(h){return h instanceof x&&(h=h.val),"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";g=null!=a.hasOwnProperty;for(c in a)g&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==
c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+f.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return String(a)}};f.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,g=c.length;d<g;){var e=d++,e=c[e];if(e==b||f.__interfLoop(e,b))return!0}return f.__interfLoop(a.__super__,b)};f.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Na:return(a|
0)===a;case Ja:return"number"==typeof a;case Ka:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Oa:return!0;default:if(null!=a)if("function"==typeof b){if(a instanceof b||f.__interfLoop(f.getClass(a),b))return!0}else{if("object"==typeof b&&f.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==Pa&&null!=a.__name__||b==Qa&&null!=a.__ename__?!0:a.__enum__==b}};f.__cast=function(a,b){if(f.__instanceof(a,b))return a;
throw new x("Cannot cast "+F.string(a)+" to "+F.string(b));};f.__nativeClassName=function(a){a=f.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};f.__isNativeObj=function(a){return null!=f.__nativeClassName(a)};f.__resolveNativeClass=function(a){return La[a]};var q=function(a,b){this.animationSpeed=1;this.ticker=PIXI.ticker.shared;this.displaying=new K;this.movieChildren=new K;this.layerLookup=new y;this.layers=new K;PIXI.Container.call(this);this.resourceId=
b;if(null==b){if(this.resource=t.getResourceForMovie(a),null==this.resource)throw new x("Flump movie does not exist: "+a);}else if(this.resource=t.get(b),null==this.resource)throw new x("Flump resource does not exist: "+b);this.resolution=this.resource.resolution;this.symbol=this.resource.library.movies.get(a);this.player=new za(this.symbol,this,this.resolution);this.set_loop(!0);this.master=!0;this.once("added",e(this,this.onAdded))};q.__name__=!0;q.__interfaces__=[C];q.__super__=PIXI.Container;
q.prototype=J(PIXI.Container.prototype,{disableAsMaster:function(){this.master=!1;this.off("added",e(this,this.onAdded))},get_resX:function(){return this.x/this.resolution},set_resX:function(a){this.x=a*this.resolution;return a},get_resY:function(){return this.y/this.resolution},set_resY:function(a){this.y=a*this.resolution;return a},get_resScaleX:function(){return this.scale.x/this.resolution},set_resScaleX:function(a){this.scale.x=a*this.resolution;return a},get_resScaleY:function(){return this.scale.y/
this.resolution},set_resScaleY:function(a){this.scale.y=a*this.resolution;return a},getLayer:function(a){if(0==this.layerLookup.exists(a))throw new x("Layer "+a+"does not exist");return this.layerLookup.get(a)},getChildDisplayObject:function(a,b){null==b&&(b=0);var c=this.player.getDisplayKey(a,b);return this.movieChildren.h[c.__id__]},getChildMovie:function(a,b){null==b&&(b=0);var c=this.getChildDisplayObject(a,b);if(0==f.__instanceof(c,q))throw new x("Child on layer "+a+" at keyframeIndex "+F.string(D.toFloat(b))+
" is not of type flump.Movie!");return c},get_symbolId:function(){return this.symbol.name},set_loop:function(a){a&&this.player.get_playing()?this.player.loop():0==a&&this.player.get_looping()&&this.player.play();return this.loop=a},set_onComplete:function(a){return this.onComplete=a},set_currentFrame:function(a){this.player.set_currentFrame(a);return a},get_currentFrame:function(){return this.player.get_currentFrame()},get_playing:function(){return this.player.get_playing()||this.player.get_looping()},
get_independantTimeline:function(){return this.player.independantTimeline},set_independantTimeline:function(a){return this.player.independantTimeline=a},get_independantControl:function(){return this.player.independantControl},set_independantControl:function(a){return this.player.independantControl=a},get_totalFrames:function(){return this.player.get_totalFrames()},set_tint:function(a){for(var b=this.movieChildren.iterator();b.hasNext();){var c=b.next();f.__instanceof(c,P)?f.__cast(c,P).tint=a:f.__instanceof(c,
q)&&f.__cast(c,q).set_tint(a)}return this.tint=a},stop:function(){this.player.stop()},play:function(){this.loop?this.player.loop():this.player.play()},gotoAndStop:function(a){this.loop||(D.gt(a,this.player.get_totalFrames()-1)?a=this.player.get_totalFrames()-1:0>a&&(a=0));this.player.goToFrame(a).stop()},gotoAndPlay:function(a){this.loop||(D.gt(a,this.player.get_totalFrames()-1)?a=this.player.get_totalFrames()-1:0>a&&(a=0));this.loop?this.player.goToFrame(a).loop():this.player.goToFrame(a).play()},
getLabelFrame:function(a){return this.player.getLabelFrame(a)},tick:function(){this.player.advanceTime(this.ticker.elapsedMS*this.animationSpeed)},onAdded:function(a){this.once("removed",e(this,this.onRemoved));this.ticker.add(e(this,this.tick))},onRemoved:function(a){this.once("added",e(this,this.onAdded));this.ticker.remove(e(this,this.tick))},createLayer:function(a){var b=new PIXI.Container;this.layers.set(a,b);b;this.layers.h[a.__id__].name=a.name;b=this.layers.h[a.__id__];this.layerLookup.set(a.name,
b);b;this.addChild(this.layers.h[a.__id__])},getChildPlayer:function(a){return this.movieChildren.h[a.displayKey.__id__].player},createFlumpChild:function(a){var b=this.resource.createDisplayObject(a.symbolId);this.movieChildren.set(a,b);b},removeFlumpChild:function(a,b){this.layers.h[a.__id__].removeChildren()},addFlumpChild:function(a,b){this.layers.h[a.__id__].addChild(this.movieChildren.h[b.__id__])},onAnimationComplete:function(){if(null!=this.onComplete)this.onComplete()},renderFrame:function(a,
b,c,d,g,e,h,k,l,m){var q=this.layers.h[a.layer.__id__],n=null,t=null;q.x=b;q.y=c;e=-e;this.master&&(q.x/=this.resolution,q.y/=this.resolution);0<q.children.length&&(n=q.getChildAt(0),n.scale.x=d,n.scale.y=g,this.master&&(n.scale.x/=this.resolution,n.scale.y/=this.resolution));"flipbook"!=q.name&&(f.__instanceof(a.symbol,la)?null!=n&&(t=a.symbol,n.pivot.x=a.pivot.x-t.origin.x,n.pivot.y=a.pivot.y-t.origin.y,this.master&&(n.pivot.x/=this.resolution,n.pivot.y/=this.resolution)):null!=n&&f.__instanceof(n,
PIXI.Container)&&0<f.__cast(n,PIXI.Container).children.length&&"flipbook"==f.__cast(n,PIXI.Container).getChildAt(0).name?(n.pivot.x=a.pivot.x,n.pivot.y=a.pivot.y,this.master&&(n.pivot.x/=this.resolution,n.pivot.y/=this.resolution)):null!=n&&(n.x=-d*a.pivot.x,n.y=-g*a.pivot.y,this.master&&(n.x/=this.resolution,n.y/=this.resolution)));q.skew.x=e;q.skew.y=h;q.alpha=k;null==a.layer.refAnimatedTint?0!=l&&(a.layer.refAnimatedTint=new qa(m,l),null==q.filters&&(q.filters=[a.layer.refAnimatedTint])):0==l?
(w.remove(q.filters,a.layer.refAnimatedTint),a.layer.refAnimatedTint=null):a.layer.refAnimatedTint.update(m,l)},setMask:function(a){if(null!=a.mask){var b=this.getLayer(a.mask).getChildAt(0).getBounds();this.getLayer(a.mask).removeChildAt(0);var c=new PIXI.Graphics;c.beginFill(0);c.drawRect(b.x,b.y,b.width,b.height);c.endFill();this.getLayer(a.mask).addChild(c);this.layers.h[a.__id__].mask=c}},labelPassed:function(a){this.emit("labelPassed",a.name)},labelHit:function(a){this.emit("labelHit",a.name)},
destroy:function(){this.stop();this.set_onComplete(null);for(var a=this.layers.iterator();a.hasNext();)a.next().removeChildren();this.player=this.symbol=null;PIXI.Container.prototype.destroy.call(this,!0)},getBaseClass:function(){return this.symbol.baseClass},getCustomData:function(){return this.symbol.data},getLayerCustomData:function(a,b){null==b&&(b=0);if(null==this.symbol.getLayer(a))throw new x("Layer "+a+" does not exist.");var c=this.symbol.getLayer(a).getKeyframeForFrame(b);if(null==c)throw new x("Keyframe does not exist at index "+
F.string(D.toFloat(b)));return c.data},__class__:q,__properties__:{set_tint:"set_tint",get_totalFrames:"get_totalFrames",set_independantControl:"set_independantControl",get_independantControl:"get_independantControl",set_independantTimeline:"set_independantTimeline",get_independantTimeline:"get_independantTimeline",get_playing:"get_playing",set_currentFrame:"set_currentFrame",get_currentFrame:"get_currentFrame",set_onComplete:"set_onComplete",set_loop:"set_loop",get_symbolId:"get_symbolId",set_resScaleY:"set_resScaleY",
get_resScaleY:"get_resScaleY",set_resScaleX:"set_resScaleX",get_resScaleX:"get_resScaleX",set_resY:"set_resY",get_resY:"get_resY",set_resX:"set_resX",get_resX:"get_resX"}});var wa=function(){};wa.__name__=!0;wa.parse=function(a,b){return function(c,d){if(null!=c.data&&0!=c.isJson&&Object.prototype.hasOwnProperty.call(c.data,"md5")&&Object.prototype.hasOwnProperty.call(c.data,"movies")&&Object.prototype.hasOwnProperty.call(c.data,"textureGroups")&&Object.prototype.hasOwnProperty.call(c.data,"frameRate")){var g=
fa.create(c.data,a),e=new y,f=new PIXI.loaders.Loader;f.baseUrl=(new va("/(.[^/]*)$","i")).replace(c.url,"");for(var h=0,k=g.atlases;h<k.length;){var l=[k[h]];++h;l[0].file=null!=b?l[0].file+("?v="+b):l[0].file+("?"+(new Date).getTime());f.add(l[0].file,null,function(b){return function(c){c=new PIXI.BaseTexture(c.data);c.resolution=a;for(var d=0,g=b[0].textures;d<g.length;){var f=g[d];++d;var h=new PIXI.Rectangle(f.rect[0],f.rect[1],f.rect[2],f.rect[3]),k=new PIXI.Point(f.origin[0],f.origin[1]);k.x/=
h.width;k.y/=h.height;h=new PIXI.Texture(c,h);e.set(f.symbol,h);h}}}(l))}f.once("complete",function(b){b=new t(g,e,c.name,a);null!=c.name&&(t.resources.set(c.name,b),b);c.data=b;d()});f.load()}}};var t=function(a,b,c,d){this.library=a;this.textures=b;this.resourceId=c;this.resolution=d};t.__name__=!0;t.exists=function(a){return t.resources.exists(a)};t.destroy=function(a){if(0==t.resources.exists(a))throw new x("Cannot destroy FlumpResource: "+a+" as it does not exist.");for(var b=t.resources.get(a),
c=b.textures.iterator();c.hasNext();)c.next().destroy();b.library=null;t.resources.remove(a)};t.get=function(a){if(!t.resources.exists(a))throw new x("Flump resource: "+a+" does not exist.");return t.resources.get(a)};t.getResourceForMovie=function(a){for(var b=t.resources.iterator();b.hasNext();){var c=b.next();if(c.library.movies.exists(a))return c}throw new x("Movie: "+a+"does not exists in any loaded flump resources.");};t.getResourceForSprite=function(a){for(var b=t.resources.iterator();b.hasNext();){var c=
b.next();if(c.library.sprites.exists(a))return c}throw new x("Sprite: "+a+" does not exists in any loaded flump resources.");};t.prototype={createMovie:function(a){a=null!=t.flumpFactory&&t.flumpFactory.displayClassExists(a)?ya.createInstance(t.flumpFactory.getMovieClass(a),[]):new q(a,this.resourceId);a.disableAsMaster();return a},createSprite:function(a){return null!=t.flumpFactory&&t.flumpFactory.displayClassExists(a)?ya.createInstance(t.flumpFactory.getSpriteClass(a),[]):new P(a,this.resourceId)},
createDisplayObject:function(a){var b;b=this.library.movies.exists(a)?this.createMovie(a):this.createSprite(a);b.name=a;return b},__class__:t};var P=function(a,b){this.symbolId=a;this.resourceId=b;var c;if(null!=b){if(c=t.get(b),null==c)throw new x("Library: "+b+"does has not been loaded.");}else c=t.getResourceForSprite(a);this.resolution=c.resolution;var d=c.library.sprites.get(a);c=c.textures.get(d.texture);PIXI.Sprite.call(this,c);this.data=d.data;this.baseClass=d.baseClass;this.anchor.x=d.origin.x/
c.width;this.anchor.y=d.origin.y/c.height};P.__name__=!0;P.__super__=PIXI.Sprite;P.prototype=J(PIXI.Sprite.prototype,{get_resX:function(){return this.x/this.resolution},set_resX:function(a){this.x=a*this.resolution;return a},get_resY:function(){return this.y/this.resolution},set_resY:function(a){this.y=a*this.resolution;return a},get_resScaleX:function(){return this.scale.x/this.resolution},set_resScaleX:function(a){this.scale.x=a*this.resolution;return a},get_resScaleY:function(){return this.scale.y/
this.resolution},set_resScaleY:function(a){this.scale.y=a*this.resolution;return a},getBaseClass:function(){return this.baseClass},getCustomData:function(){return this.data},__class__:P,__properties__:{set_resScaleY:"set_resScaleY",get_resScaleY:"get_resScaleY",set_resScaleX:"set_resScaleX",get_resScaleX:"get_resScaleX",set_resY:"set_resY",get_resY:"get_resY",set_resX:"set_resX",get_resX:"get_resX"}});var ka=function(a,b,c){this._imageData=null;var d;this.mgr=c;if(null!=a&&(d=a.add_groups,this.id=
a.id,this["export"]=a["export"],this.sharedProperties=new Q(a),this.groups=new y,null!=b&&(b.assets.set(this.id,this),this,this.groups.set(b.id,b),b),null!=d))for(b=0;b<d.length;)a=c.addGroup(d[b]),a.assets.set(this.id,this),this,this.groups.set(a.id,a),a,b++};ka.__name__=!0;ka.prototype={getAssetInstance:function(){var a;0<this.freeInstances.length?(a=this.freeInstances.pop(),this.usedInstances.set(a,a),a,a.addChild(a.getContent())):(a=this.generateInstance(),"lock_instance"!=this.getLockInstance()&&
(this.usedInstances.set(a,a),a));return a},freeAssetInstance:function(a){null!=this.usedInstances.h.__keys__[a.__id__]?(this.usedInstances.remove(a),this.freeInstances.push(a)):a.destroy()},getFile:function(){var a;if(null!=this.sharedProperties.file)return this.sharedProperties.file;for(var b=this.groups.iterator();b.hasNext();)if(a=b.next().getFile(),null!=a)return a;return this.mgr.sharedProperties.file},free:function(){for(var a=0,b=this.freeInstances;a<b.length;){var c=b[a];++a;c.destroy()}this.freeMap();
this.usedInstances=this.freeInstances=null},isMalloc:function(){return null!=this.freeInstances},getInstanceCount:function(){var a;if(0<=this.sharedProperties.instanceCount)return this.sharedProperties.instanceCount;for(var b=this.groups.iterator();b.hasNext();)if(a=b.next().getInstanceCount(),0<=a)return a;return this.mgr.sharedProperties.instanceCount},getLockInstance:function(){var a;if("lock_undefined"!=this.sharedProperties.lockInstance)return this.sharedProperties.lockInstance;for(var b=this.groups.iterator();b.hasNext();)if(a=
b.next().getLockInstance(),"lock_undefined"!=a)return a;return this.mgr.sharedProperties.lockInstance},getRender:function(){var a;if(null!=this.sharedProperties.render)return this.sharedProperties.render;for(var b=this.groups.iterator();b.hasNext();)if(a=b.next().getRender(),null!=a)return a;return this.mgr.sharedProperties.render},getIsMap:function(){if("map_undefined"!=this.sharedProperties.mapMode)return"map_yes"==this.sharedProperties.mapMode;for(var a=this.groups.iterator();a.hasNext();){var b=
a.next();if("map_undefined"!=b.getMapMode())return"map_yes"==b.getMapMode()}return"map_undefined"!=this.mgr.sharedProperties.mapMode?"map_yes"==this.mgr.sharedProperties.mapMode:!1},getData:function(a){var b;if(this.sharedProperties.datas.exists(a))return this.sharedProperties.datas.get(a);for(var c=this.groups.iterator();c.hasNext();)if(b=c.next().getData(a),null!=b)return b;return this.mgr.sharedProperties.datas.exists(a)?this.mgr.sharedProperties.datas.get(a):null},malloc:function(){this.freeInstances=
[];this.usedInstances=new K;this.mallocInstance();this.getIsMap()&&this.generateMap();return!0},get_imageData:function(){return this._imageData},mallocInstance:function(){var a=this.getInstanceCount(),b;for(b=0;b<a;)this.freeInstances.push(this.generateInstance()),b++},generateInstance:function(){var a=this.getRender();if("default"==a.render){if(null!=this.getFile()&&R.getInstance().getLoadingFile(this.getFile().getId()).isIMG())return new T(this,PIXI.Sprite.fromImage(R.getInstance().getLoadingFile(this.getFile().getId()).getUrl()))}else if("flump"==
a.render){if("mc"==a.type)return new T(this,new q(this["export"]));if("sp"==a.type)return new T(this,new P(this["export"]))}return new T(this,new PIXI.Sprite)},generateMap:function(){var a=this.generateInstance(),b=new PIXI.CanvasRenderer(a.width,a.height,{transparent:!0}),c=a.getLocalBounds();a.x=-c.x;a.y=-c.y;b.render(a);this._imageData=new Ea(a.x,a.y,b.context.getImageData(0,0,a.width,a.height));a.destroy();b.destroy(!0)},freeMap:function(){null!=this._imageData&&(this._imageData.destroy(),this._imageData=
null)},__class__:ka,__properties__:{get_imageData:"get_imageData"}};var Ea=function(a,b,c){this.dx=a;this.dy=b;this.imageData=c};Ea.__name__=!0;Ea.prototype={getPixel:function(a,b){var c=Math.floor(a+this.dx),d=Math.floor(b+this.dy);if(0>c||c>this.imageData.width||0>d||d>this.imageData.height)return[0,0,0,0];c=4*(c+this.imageData.width*d);return[this.imageData.data[c],this.imageData.data[c+1],this.imageData.data[c+2],this.imageData.data[c+3]]},destroy:function(){this.imageData=null},__class__:Ea};
var ra=function(a,b,c){ka.call(this,a,b,c);this.id="asset_vide";this["export"]=null;this.sharedProperties=new Q(null);this.groups=new y;this.sharedProperties.instanceCount=0;this.sharedProperties.lockInstance="lock_instance";this.sharedProperties.render=new Y(null);this.sharedProperties.mapMode="map_no"};ra.__name__=!0;ra.__super__=ka;ra.prototype=J(ka.prototype,{__class__:ra});var Z=function(a,b){this.id=null!=a?Z.getId(a):null;this.childs=new y;this.assets=new y;this.setConfig(a,b)};Z.__name__=
!0;Z.getId=function(a){return a.id};Z.prototype={setConfig:function(a,b){this.sharedProperties=new Q(a);this.parent=b;null!=b&&(b.childs.set(this.id,this),this)},getFile:function(){return null!=this.sharedProperties.file?this.sharedProperties.file:null!=this.parent?this.parent.getFile():null},getInstanceCount:function(){return 0<=this.sharedProperties.instanceCount?this.sharedProperties.instanceCount:null!=this.parent?this.parent.getInstanceCount():-1},getLockInstance:function(){return"lock_undefined"!=
this.sharedProperties.lockInstance?this.sharedProperties.lockInstance:null!=this.parent?this.parent.getLockInstance():"lock_undefined"},getRender:function(){return null!=this.sharedProperties.render?this.sharedProperties.render:null!=this.parent?this.parent.getRender():null},getMapMode:function(){return"map_undefined"!=this.sharedProperties.mapMode?this.sharedProperties.mapMode:null!=this.parent?this.parent.getMapMode():"map_undefined"},getData:function(a){return this.sharedProperties.datas.exists(a)?
this.sharedProperties.datas.get(a):null!=this.parent?this.parent.getData(a):null},__class__:Z};var T=function(a,b){PIXI.Container.call(this);this._desc=a;null!=b&&(this._export=this.addChild(b),f.__instanceof(this._export,PIXI.Container)&&h.recursiveStop(this._export))};T.__name__=!0;T.__super__=PIXI.Container;T.prototype=J(PIXI.Container.prototype,{destroy:function(){null!=this._export&&(this.removeChild(this._export),this._export.destroy(),this._export=null);this._desc=null;PIXI.Container.prototype.destroy.call(this)},
getContent:function(){return this._export},getDesc:function(){return this._desc},free:function(){this._desc.freeAssetInstance(this)},__class__:T});var Y=function(a){null!=a?(this.render=a.name,null!=a.type&&(this.type=a.type)):this.render="default"};Y.__name__=!0;Y.prototype={__class__:Y};var sa=function(a){var b=a.value.split(",");this.id=a.id;this.values=[];for(a=0;a<b.length;)this.values.push(new Fa(b[a])),a++};sa.__name__=!0;sa.prototype={getLen:function(){for(var a=0,b=0;b<this.values.length;)a+=
this.values[b++].getLen();return a},getVal:function(a){var b;for(b=0;b<this.values.length;){if(a>=this.values[b].getLen())a-=this.values[b].getLen();else break;b++}return this.values[b].getVal(a)},__class__:sa};var ga=function(){this.mallocLimitTime=500;this.vars=null;ga.instance=this};ga.__name__=!0;ga.prototype={init:function(a){this.assets=new y;this.groups=new y;this.voidAsset=new ra(null,null,this);this.parseGlobal(a.assets);this.parseGroups(a.assets);this.voidAsset.malloc()},getAssetInstance:function(a){return"asset_vide"!=
a?this.assets.get(a).getAssetInstance():this.voidAsset.getAssetInstance()},getVar:function(a){return this.vars.get(a)},addVar:function(a){null==this.vars&&(this.vars=new y);a=new sa(a);this.vars.set(a.id,a);a},getAssetDescById:function(a){return this.assets.exists(a)?this.assets.get(a):null},loadAssets:function(a,b){var c=new y,d;if(null!=b)for(d=0;d<b.length;)this.loadPatternAsset(a,b[d],c),d++;else this.loadPatternAsset(a,null,c);return a},mallocAssets:function(a,b){var c=new y,d;this.notifyMallocAssets=
a;this.mallocStack=[];if(null!=b)for(d=0;d<b.length;)this.mallocPatternAsset(b[d],c),d++;else this.mallocPatternAsset(null,c);if(null!=a)this.mallocNbAssets=this.mallocStack.length,L.getInstance().addIterator(e(this,this.doMallocIteration));else{for(;0<this.mallocStack.length;)this.mallocStack[0].malloc()&&this.mallocStack.shift();this.mallocStack=null}},freeAssets:function(a){if(null!=a)for(var b=0;b<a.length;){var c=a[b];++b;this.freePatternAsset(c)}else this.freePatternAsset(null)},unloadAssets:function(a,
b){var c;null==a&&(a=new y);for(var d=this.assets.iterator();d.hasNext();)if(c=d.next(),c.isMalloc()&&(c=c.getFile(),null!=c)){var g=c.getId();null!=I[g]?a.setReserved(g,c):a.h[g]=c;c}if(null!=b)for(d=0;d<b.length;)c=b[d],++d,this.unloadPatternAsset(c,a);else this.unloadPatternAsset(null,a)},doMallocIteration:function(a){a=this.notifyMallocAssets;var b;if(null!=this.mallocStack){b=(new Date).getTime();do if(a.onMallocAssetsProgress(this.mallocNbAssets-this.mallocStack.length,this.mallocNbAssets),
0==this.mallocStack.length){L.getInstance().remIterator(e(this,this.doMallocIteration));this.notifyMallocAssets=this.mallocStack=null;a.onMallocAssetsEnd();break}else if(this.mallocStack[0].malloc())this.mallocStack.shift();else break;while((new Date).getTime()-b<this.mallocLimitTime)}},addGroup:function(a){var b;if(this.groups.exists(a))return this.groups.get(a);b=new Z;b.id=a;this.groups.set(a,b);b;return b},addAsset:function(a){this.assets.set(a.id,a);a},freePatternAsset:function(a){for(var b=
this.assets.iterator();b.hasNext();){var c=b.next();(null==a||a.match(c))&&c.free()}},unloadPatternAsset:function(a,b){for(var c,d=this.assets.iterator();d.hasNext();)if(c=d.next(),!c.isMalloc()&&(null==a||a.match(c))&&(c=c.getFile(),null!=c)){var g=void 0,g=c.getId(),g=null!=I[g]?b.existsReserved(g):b.h.hasOwnProperty(g);g||(g=c.getId(),null!=I[g]?b.setReserved(g,c):b.h[g]=c,c,R.getInstance().freeLoadedFileMem(c))}},mallocPatternAsset:function(a,b){for(var c,d=this.assets.keys();d.hasNext();){var g=
d.next();c=this.assets.get(g);null!=(null!=I[g]?b.getReserved(g):b.h[g])||null!=a&&!a.match(c)||(null!=I[g]?b.setReserved(g,c):b.h[g]=c,c,this.mallocStack.push(c))}},loadPatternAsset:function(a,b,c){for(var d,g,e=this.assets.keys();e.hasNext();)if(d=e.next(),d=this.assets.get(d),null==b||b.match(d)){g=d.getFile();var f;if(f=null!=g)f=void 0,f=g.getId(),f=null!=I[f]?c.existsReserved(f):c.h.hasOwnProperty(f),f=!f;f&&(f=g.getId(),null!=I[f]?c.setReserved(f,g):c.h[f]=g,g,"flump"==d.getRender().render?
a.addFlumpFile(g):a.addDisplayFile(g))}},parseAssets:function(a,b){var c=a.assets,d,g,e,f,h,k;if(null!=c)for(d=0;d<c.length;){f=c[d];h=this.getVarPool(f);e=h.getLen();for(g=0;g<e;)k=new ka(h.substituteVars(f,g),b,this),this.assets.set(k.id,k),k,g++;d++}},parseGroups:function(a,b){var c=a.groups,d,g,e;this.parseAssets(a,b);if(null!=c)for(e=0;e<c.length;)d=c[e],new Z(d,b),g=void 0,g=Z.getId(d),g=this.groups.get(g),null!=g?(g=Z.getId(d),g=this.groups.get(g),g.setConfig(d,b)):(g=new Z(d,b),this.groups.set(g.id,
g),g),this.parseGroups(d,g),e++},parseGlobal:function(a){this.sharedProperties=new Q(a);null==this.sharedProperties.render&&(this.sharedProperties.render=new Y(null));0>this.sharedProperties.instanceCount&&(this.sharedProperties.instanceCount=1);"lock_undefined"==this.sharedProperties.lockInstance&&(this.sharedProperties.lockInstance="unlock_instance");this.buildVars(a)},buildVars:function(a){a=a.vars;var b,c;null==this.vars&&(this.vars=new y);if(null!=a)for(c=0;c<a.length;)b=new sa(a[c]),this.vars.set(b.id,
b),b,c++},getVarPool:function(a){a=JSON.stringify(a);for(var b=new Ga,c=this.vars.iterator();c.hasNext();){var d=c.next();0<=a.indexOf(d.id)&&b.addVar(this.vars.get(d.id))}return b},__class__:ga};var Q=function(a){this.file=null!=a?this.parseFile(a):null;this.render=null!=a?this.parseRender(a):null;this.instanceCount=null!=a?this.parseInstanceCount(a):-1;this.lockInstance=null!=a?this.parseLockInstance(a):"lock_undefined";this.datas=null!=a?this.parseDatas(a):new y;this.mapMode=null!=a?this.parseMapMode(a):
"map_undefined"};Q.__name__=!0;Q.prototype={parseFile:function(a){a=a.file;return null!=a&&null!=a.name?new da(a.name,a.path,a.version):null},parseRender:function(a){return null!=a.render?new Y(a.render):null},parseInstanceCount:function(a){return null!=a.instance?F.parseInt(a.instance):-1},parseLockInstance:function(a){return null!=a.lock_instance&&"0"!=a.lock_instance?"lock_instance":null!=a.unlock_instance&&"0"!=a.unlock_instance?"unlock_instance":"lock_undefined"},parseMapMode:function(a){return null!=
a.map?"1"==a.map?"map_yes":"map_no":"map_undefined"},parseDatas:function(a){a=a.datas;var b=new y;if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c;var g=d.id,d=d.value;null!=I[g]?b.setReserved(g,d):b.h[g]=d;d}return b},__class__:Q};var Ga=function(){this.vars=[]};Ga.__name__=!0;Ga.prototype={addVar:function(a){this.vars.push(a)},getLen:function(){var a=1,b;for(b=0;b<this.vars.length;)a*=this.vars[b].getLen(),b++;return a},substituteVars:function(a,b){var c,d;if(0<this.vars.length){c=JSON.stringify(a);
d=this.getVarValAt(b);for(var g=d.keys();g.hasNext();){var e=g.next();c=xa.replace(c,e,null!=I[e]?d.getReserved(e):d.h[e])}return JSON.parse(c)}return a},getVarValAt:function(a){var b=new y,c;for(c=0;c<this.vars.length;){var d=this.vars[c].getVal(a%this.vars[c].getLen());b.set(this.vars[c].id,d);d;a=F["int"](a/this.vars[c].getLen());c++}return b},__class__:Ga};var Fa=function(a){this.value=a};Fa.__name__=!0;Fa.prototype={getLen:function(){var a=this.value.split("..");return 1==a.length?1:F.parseInt(a[1])-
F.parseInt(a[0])+1},getVal:function(a){var b=this.value.split(".."),c;if(1==b.length)return this.value;c=F.parseInt(b[0]);a=c+a;b=b[0].length;if((null==c?"null":""+c).length<b){c=null==a?"null":""+a;for(a=c.length;a<b;)c="0"+c,a++;return c}return null==a?"null":""+a},__class__:Fa};var R=function(){this.loadedFiles=new y};R.__name__=!0;R.getInstance=function(){null==R.instance&&(R.instance=new R);return R.instance};R.prototype={getLoadingFile:function(a){return this.isAlreadyLoaded(a)?this.loadedFiles.get(a):
null},isAlreadyLoaded:function(a){return null!=this.loadedFiles.get(a)},regLoadedFile:function(a){var b=a.getId();this.loadedFiles.exists(b)?k.instance.traceDebug("WARNING : VegaLoaderMgr::regLoadedFile : file already exists "+a.getId()+", ignore"):(b=a.getId(),this.loadedFiles.set(b,a),a)},freeLoadedFileMem:function(a){k.instance.traceDebug("INFO : VegaLoaderMgr::freeLoadedFileMem : "+a.getId());var b=a.getId();this.loadedFiles.get(b).free();a=a.getId();this.loadedFiles.remove(a)},__class__:R};var u=
function(a){this._file=a;this.buildLoader()};u.__name__=!0;u.getVersionUrl=function(a){a=a.getVersion();return null!=a&&"NO-VERSION"!=a?"NO-CACHE"==a?F.string((new Date).getTime()):a:""};u.addVersionToUrl=function(a,b){return null!=b&&""!=b?-1!=a.indexOf("?")?a+"&"+u.VERSION_PARAM+"="+b:a+"?"+u.VERSION_PARAM+"="+b:a};u.prototype={free:function(){null!=this.vegaLoader&&this.removeLoaderListener();this._file=this.vegaLoader=null;this.freeLoader()},getId:function(){return this._file.getId()},load:function(a){this.vegaLoader=
a;this.doLoad()},getLoadedContent:function(a){return null!=this.loader&&!this.loader.loading&&0<this.loader.progress?H.getProperty(this.loader.resources,this._file.getId()).data:null},isIMG:function(){return H.getProperty(this.loader.resources,this._file.getId()).isImage},getUrl:function(){return H.getProperty(this.loader.resources,this._file.getId()).url},buildLoader:function(){this.loader=new PIXI.loaders.Loader;this.loader.add(this._file.getId(),this.getUrlRequest())},freeLoader:function(){null!=
this.loader&&(this.loader.reset(),this.loader=null)},doLoad:function(){this.loader.load(e(this,this.onLoadComplete))},removeLoaderListener:function(){this.loader.removeAllListeners()},onLoadComplete:function(){null==H.getProperty(this.loader.resources,this._file.getId()).error?(oa.log(H.getProperty(this.loader.resources,this._file.getId())),this.removeLoaderListener(),this.vegaLoader.onCurFileLoaded(),this.vegaLoader=null):(k.instance.traceDebug("ERROR : LoadingFile::onLoadComplete : "+this._file.getId()+
" : "+F.string(H.getProperty(this.loader.resources,this._file.getId()).error)),this.loader.reset(),this.loader.add(this._file.getId(),this.getUrlRequest()),this.loader.load(e(this,this.onLoadComplete)))},getUrlRequest:function(){var a=this._file.getName(),b;b=null!=this._file.getPath()?this._file.getPath():"";a=-1!=a.indexOf("://")?a:b+a;return a=u.addVersionToUrl(a,u.getVersionUrl(this._file))},__class__:u};C=function(a){u.call(this,a)};C.__name__=!0;C.__super__=u;C.prototype=J(u.prototype,{free:function(){PIXI.Texture.removeTextureFromCache(this.getUrl()).destroy(!0);
u.prototype.free.call(this)},__class__:C});C=function(a){u.call(this,a)};C.__name__=!0;C.__super__=u;C.prototype=J(u.prototype,{free:function(){t.destroy(this.getId());u.prototype.free.call(this)},buildLoader:function(){u.prototype.buildLoader.call(this);this.loader.after(wa.parse(1,u.getVersionUrl(this._file)))},__class__:C});C=function(a,b){u.call(this,b);this.fontId=a};C.__name__=!0;C.__super__=u;C.prototype=J(u.prototype,{doLoad:function(){k.instance.traceDebug("INFO : LoadingFileFont::doLoad : "+
this.fontId+" : "+this.getUrlRequest());WebFont.load({custom:{families:[this.fontId],urls:[this.getUrlRequest()]},active:e(this,this.onLoadComplete)})},onLoadComplete:function(){this.vegaLoader.onCurFileLoaded();this.vegaLoader=null},buildLoader:function(){},removeLoaderListener:function(){},__class__:C});var ma=function(a){this.ctrReload=0;this.desc=null;this.desc=a;u.call(this,null)};ma.__name__=!0;ma.__super__=u;ma.prototype=J(u.prototype,{getId:function(){return this.desc.getId()},getLoadedContent:function(a){return this.desc.getHowl()},
isIMG:function(){return!1},doLoad:function(){var a=this.desc.getOptions();a.autoplay=!1;a.preload=!1;this.desc.regHowl(new Howl(this.desc.getOptions()));this.desc.getHowl().on("load",e(this,this.onLoadComplete));this.desc.getHowl().on("loaderror",e(this,this.onLoadError));this.desc.getHowl().load()},buildLoader:function(){},freeLoader:function(){this.desc=null},removeLoaderListener:function(){this.desc.getHowl().off("load",e(this,this.onLoadComplete));this.desc.getHowl().off("loaderror",e(this,this.onLoadError))},
onLoadComplete:function(){k.instance.traceDebug("INFO : LoadingFileHowl::onLoadComplete  : "+this.desc.getId());this.removeLoaderListener();this.vegaLoader.onCurFileLoaded();this.vegaLoader=null;G.getInstance().addSndDesc(this.desc)},onLoadError:function(){20>this.ctrReload++?(k.instance.traceDebug("ERROR : LoadingFileHowl::onLoadError : "+this.desc.getId()+" : retry "+this.ctrReload),this.desc.getHowl().load()):(k.instance.traceDebug("ERROR : LoadingFileHowl::onLoadError : "+this.desc.getId()+" : skip !"),
this.removeLoaderListener(),this.vegaLoader.onCurFileLoaded(!1),this.vegaLoader=null,G.getInstance().addSndDesc(this.desc),this.free())},__class__:ma});C=function(a){u.call(this,a)};C.__name__=!0;C.__super__=u;C.prototype=J(u.prototype,{__class__:C});var da=function(a,b,c){this._name=a;this._path=b;this._version=null!=c?c:k.instance.version};da.__name__=!0;da.prototype={getId:function(){return(null!=this._path?this._path+":":"")+this._name},getName:function(){return this._name},getPath:function(){return this._path},
getVersion:function(){return this._version},__class__:da};var M=function(){this.isTouchpad=this.isDown=!1;this.TIMEOUT_MOUSE=5E3;this.TIMEOUT=1E3;var a=this.getEventAnchor();M.instance=this;this.datas=[];a.on("mousedown",e(this,this.onMouseDown));a.on("mouseup",e(this,this.onMouseUp));a.on("mouseupoutside",e(this,this.onMouseUp));a.on("mouseout",e(this,this.onMouseUp));a.on("mousemove",e(this,this.onMouseMove));a.on("touchstart",e(this,this.onTouchDown));a.on("touchend",e(this,this.onTouchUp));a.on("touchendoutside",
e(this,this.onTouchUp));a.on("touchmove",e(this,this.onTouchMove));this.switchEnable(!0);L.getInstance().addIterator(e(this,this.doFrame))};M.__name__=!0;M.isOK=function(){return null!=M.instance&&M.instance.getEventAnchor().interactive};M.prototype={getTouchOverRect:function(a){for(var b=[],c=0,d=this.datas;c<d.length;){var g=d[c];++c;a.contains(g.coord.x,g.coord.y)&&b.push(g)}return b},getDownTouches:function(){for(var a=[],b=0;b<this.datas.length;)this.datas[b].isDown&&a.push(this.datas[b]),b++;
return a},getTouchId:function(a){for(var b=0,c=this.datas;b<c.length;){var d=c[b];++b;if(d.id==a)return d}return null},getTouchEvent:function(a,b){return null==b?this.findNearestPos(a.data.getLocalPosition(this.getRepere()),!0):b?this.getMouseTouch():this.findNearestPos(a.data.getLocalPosition(this.getRepere()))},getPointerCoord:function(){return 0<this.datas.length?this.datas[0].coord:null},switchEnable:function(a){k.instance.traceDebug("INFO : GlobalPointer::switchEnable : "+(null==a?"null":""+
a));this.getEventAnchor().interactive=a;this.flush()},forceCaptureDown:function(a,b){if(b)this.onMouseDown(a);else this.onTouchDown(a);a.stopPropagation()},flush:function(){this.isDown=!1;this.datas=[]},doFrame:function(a){for(var b=this.datas.length-1;0<=b;)this.datas[b].delay+=a,this.datas[b].isMouse?this.datas[b].delay>=this.TIMEOUT_MOUSE&&w.remove(this.datas,this.datas[b]):this.datas[b].delay>=this.TIMEOUT&&w.remove(this.datas,this.datas[b]),b--;this.checkTouchState()},toString:function(){for(var a=
"",b=0,c=this.datas;b<c.length;){var d=c[b];++b;a+=d.id+":"+Math.round(d.coord.x)+":"+Math.round(d.coord.y)+":"+(d.isDown?"D":"U")+":"+(d.isMouse?"M":"T")+" - "}return a},getRepere:function(){return k.instance.getContent()},onTouchDown:function(a){this.datas.push(new aa(a.data.getLocalPosition(this.getRepere()),!1,!0));this.checkTouchState()},onTouchUp:function(a){a=this.findNearestPos(a.data.getLocalPosition(this.getRepere()));null!=a&&(w.remove(this.datas,a),this.checkTouchState())},onTouchMove:function(a){a=
a.data.getLocalPosition(this.getRepere());var b=this.findNearestPos(a);null!=b?(b.coord=a,b.delay=0):(this.datas.push(new aa(a,!1,!0)),this.checkTouchState())},onMouseDown:function(a){var b=this.getMouseTouch();a=a.data.getLocalPosition(this.getRepere());null==b?this.datas.push(new aa(a,!0,!0)):(b.coord=a,b.delay=0,b.isDown=!0);this.checkTouchState()},onMouseUp:function(a){a=a.data.getLocalPosition(this.getRepere());var b=this.getMouseTouch();null!=b?(b.coord=a,b.delay=0,b.isDown=!1):this.datas.push(new aa(a,
!0,!1));this.checkTouchState()},onMouseMove:function(a){a=a.data.getLocalPosition(this.getRepere());var b=this.getMouseTouch();null!=b?(b.coord=a,b.delay=0):(this.datas.push(new aa(a,!0,!1)),this.checkTouchState())},getEventAnchor:function(){return k.instance.stage},findNearestPos:function(a,b){null==b&&(b=!1);for(var c=-1,d=null,g,e=0,f=this.datas;e<f.length;){var h=f[e];++e;if(b||!h.isMouse)if(g=(h.coord.x-a.x)*(h.coord.x-a.x)+(h.coord.y-a.y)*(h.coord.y-a.y),0>c||g<c)c=g,d=h}return d},getMouseTouch:function(){for(var a=
0,b=this.datas;a<b.length;){var c=b[a];++a;if(c.isMouse)return c}return null},checkTouchState:function(){0<this.datas.length?this.datas[0].isMouse?(this.isTouchpad=!0,this.isDown=this.datas[0].isDown):(this.isTouchpad=!1,this.isDown=!0):this.isDown=!1},__class__:M};var aa=function(a,b,c){this.isBound=!1;this.coord=a;this.isMouse=b;this.delay=0;this.isDown=c;this.id=aa.ctrTouch++};aa.__name__=!0;aa.prototype={__class__:aa};var ca=function(){this.listeners=[]};ca.__name__=!0;ca.getInstance=function(){null==
ca.instance&&(ca.instance=new ca);return ca.instance};ca.prototype={addListener:function(a){this.listeners.push(a)},remListener:function(a){w.remove(this.listeners,a)},broadcastResize:function(){for(var a=0,b=this.listeners;a<b.length;){var c=b[a];++a;c()}},__class__:ca};var L=function(){this.hasRequest=this.isPause=this.isError=!1;this.iterators=[];this.lastTime=(new Date).getTime();if("undefined"!=typeof window)this.onFrame(0);else k.instance.traceDebug("ERROR : VegaFramer::VegaFramer : no browser, no framing ...")};
L.__name__=!0;L.getInstance=function(){null==L.instance&&(L.instance=new L);return L.instance};L.prototype={isRegistered:function(a){return-1!=w.indexOf(this.iterators,a,0)},addIterator:function(a){this.iterators.push(a)},remIterator:function(a){w.remove(this.iterators,a)},switchPause:function(a){!this.isPause||a||this.hasRequest||(this.lastTime=(new Date).getTime(),this.requestFrame());this.isPause=a},onFrame:function(a){if(k.instance.debug){if(!this.isError)try{this.doFrame(a)}catch(b){b instanceof
x&&(b=b.val),k.instance.traceDebug("ERROR :"+F.string(b).split("\n")[0]),oa.log(b),this.isError=!0}}else this.doFrame(a)},doFrame:function(a){var b,c,d;if(this.isPause)this.hasRequest=!1;else if(this.requestFrame(),a=(new Date).getTime(),b=1E3/k.instance.fps,c=Math.min(a-this.lastTime,3*b),c>=b){d=Math.min(c-b,b/2);c-=d;b=this.iterators.slice();for(var g=0;g<b.length;){var e=b[g];++g;this.isPause||-1==w.indexOf(this.iterators,e,0)||e(c)}this.lastTime=a-d}},requestFrame:function(){this.hasRequest=
!0;window.requestAnimationFrame(e(this,this.onFrame))},__class__:L};var U=function(){};U.__name__=!0;U.prototype={__class__:U};var ea=function(){};ea.__name__=!0;ea.prototype={__class__:ea};var na=function(){};na.__name__=!0;na.prototype={__class__:na};var V=function(){};V.__name__=!0;V.prototype={__class__:V};var Ha=function(a,b,c,d,g){this._id=this._options=this._howl=this._fileResId=this._playMode=null;this._id=a;this._playMode=g;this._options=null==c?{}:c;if(null==this._options.src){if(null==
b)b=new da(a);else if(""==b.getName()||null==b.getName())b=new da(a,b.getPath(),b.getVersion());c=b.getName();g=null!=b.getPath()?b.getPath():"";c=-1!=c.indexOf("://")?c:g+c;null==d&&(d=G.getInstance().getExts());for(this._options.src=[];this._options.src.length<d.length;)this._options.src.push(u.addVersionToUrl(c+d[this._options.src.length-1],u.getVersionUrl(b)))}this._fileResId=null==b?new da(a):b};Ha.__name__=!0;Ha.prototype={getIsLoaded:function(){return null!=this._howl&&"loaded"==this._howl.state()},
destroy:function(){this._fileResId=this._howl=this._options=null},regHowl:function(a){this._howl=a},getHowl:function(){return this._howl},getId:function(){return this._id},getOptions:function(){return this._options},getFileResId:function(){return this._fileResId},get_playMode:function(){return this._playMode},__class__:Ha,__properties__:{get_playMode:"get_playMode"}};var Ia=function(a){this.doMode=null;this.createTimestamp=this.playTimestamp=this.openTimestamp=-1;this.mode=null;this._chan=-1;this._track=
null;this.PLAY_DELAI_MAX=1500;this._track=a;L.getInstance().addIterator(e(this,this.onFrame));this.createTimestamp=(new Date).getTime()};Ia.__name__=!0;Ia.prototype={play:function(a){this.mode=a;this.checkMax();f.__instanceof(this.mode,ea)?this.setModeDelayed():this.regChainedTracks()||this.tryUnloadedTrackOpenChan()},playInvalid:function(a){k.instance.traceDebug("WARNING : SndInstance::playInvalid : "+this._track.getDesc().getId());this.mode=a;this.checkMax();f.__instanceof(this.mode,ea)?this.setModeDelayedInvalid():
(this.regChainedTracks(),this.setModeOpenChanInvalid())},getTimestamp:function(){return 0<=this.openTimestamp?this.openTimestamp:0<=this.playTimestamp?this.playTimestamp:this.createTimestamp},regChainedTracks:function(){var a;if(f.__instanceof(this.mode,U)&&G.getInstance().isPlaying(f.__cast(this.mode,U).getChainedSubId())){a=G.getInstance().getSndTracks(f.__cast(this.mode,U).getChainedSubId());for(var b=0;b<a.length;){var c=a[b];++b;c.isPlaying()&&c.addEndListener(e(this,this.onSndChainEnd))}return!0}return!1},
onFrame:function(a){null!=this.doMode&&this.doMode()},tryUnloadedTrackOpenChan:function(){this._track.getDesc().getIsLoaded()?this.openChan():this.setModeOpenChanInvalid()},setModeOpenChanInvalid:function(){this.openTimestamp=-1;this.playTimestamp=(new Date).getTime();this.doMode=e(this,this.doModeOpenChanInvalid)},doModeOpenChanInvalid:function(){this._track.getDesc().getIsLoaded()&&G.getInstance().isUnlocked()?this.checkTimestampPlay():this.checkTimestampStop()},setModeDelayed:function(){this.openTimestamp=
f.__cast(this.mode,ea).getDelayedStartTime();this.doMode=e(this,this.doModeDelayed)},doModeDelayed:function(){(new Date).getTime()>=f.__cast(this.mode,ea).getDelayedStartTime()&&(this.regChainedTracks()||this.tryUnloadedTrackOpenChan())},setModeDelayedInvalid:function(){this.openTimestamp=f.__cast(this.mode,ea).getDelayedStartTime();this.doMode=e(this,this.doModeDelayedInvalid)},doModeDelayedInvalid:function(){(new Date).getTime()>=f.__cast(this.mode,ea).getDelayedStartTime()&&(this.regChainedTracks(),
this.setModeOpenChanInvalid())},stop:function(){var a;0<=this._chan&&(this._track.getDesc().getHowl().stop(this._chan),this._chan=-1);if(f.__instanceof(this.mode,U)){a=G.getInstance().getSndTracks(f.__cast(this.mode,U).getChainedSubId());for(var b=0;b<a.length;){var c=a[b];++b;c.remEndListener(e(this,this.onSndChainEnd))}}this.onSndEnd()},checkTimestampStop:function(){0<this.playTimestamp&&!this._track.getDesc().getOptions().loop&&(new Date).getTime()-this.playTimestamp>this.PLAY_DELAI_MAX&&(k.instance.traceDebug("WARNING : SndInstance::checkTimestampStop : too late, stop : "+
this._track.getDesc().getId()),this.stop())},checkTimestampPlay:function(){if(0<this.playTimestamp)if(this._track.getDesc().getOptions().loop||(new Date).getTime()-this.playTimestamp<=this.PLAY_DELAI_MAX)if(k.instance.traceDebug("INFO : SndInstance::checkTimestampPlay : loaded, resume play : "+this._track.getDesc().getId()),f.__instanceof(this.mode,U))this.onSndChainEnd();else this.openChan();else k.instance.traceDebug("WARNING : SndInstance::checkTimestampPlay : loaded, too late, stop : "+this._track.getDesc().getId()),
this.stop()},checkMax:function(){var a,b,c;if(f.__instanceof(this.mode,na)){c=f.__cast(this.mode,na).getMaxNb();b=G.getInstance().getSndTracks(f.__cast(this.mode,na).getMaxSubId());a=[];for(var d=0;d<b.length;){var g=b[d];++d;for(var h=0,g=g.get_channels();h<g.length;){var k=g[h];++h;k!=this&&a.push(k)}}if(a.length>c)for(a.sort(e(this,this.cmpTimestamp)),b=0,c=a.length-c;b<c;)a[b++].stop()}},cmpTimestamp:function(a,b){return a.getTimestamp()>b.getTimestamp()?1:a.getTimestamp()<b.getTimestamp()?-1:
0},openChan:function(){var a=(new Date).getTime();this.doMode=null;G.getInstance().isUnlocked()||k.instance.traceDebug("WARNING : SndInstance::openChan : unlocker ? : "+this._track.getDesc().getId());if(!f.__instanceof(this.mode,V)||this._track.getDesc().getOptions().loop||a-f.__cast(this.mode,V).getSyncStartedAtTime()<1E3*this._track.getDesc().getHowl().duration())this._chan=this._track.getDesc().getHowl().play();0<=this._chan?(this._track.getDesc().getHowl().on("end",e(this,this.onSndEnd),this._chan),
this.playTimestamp=-1,f.__instanceof(this.mode,V)?(this._track.getDesc().getHowl().seek((a-f.__cast(this.mode,V).getSyncStartedAtTime())/1E3%this._track.getDesc().getHowl().duration(),this._chan),this.openTimestamp=f.__cast(this.mode,V).getSyncStartedAtTime()):this.openTimestamp=a,0<=this._track.get_volumeCoef()&&this._track.getDesc().getHowl().volume(this._track.getDesc().getHowl().volume()*this._track.get_volumeCoef(),this._chan),k.instance.traceDebug("INFO : SndInstance::openChan : "+this._track.getDesc().getId()+
" : "+this._chan)):(k.instance.traceDebug("ERROR : SndInstance::openChan : "+this._track.getDesc().getId()+" : "+this._chan),this.onSndEnd())},onSndEnd:function(){if(0<=this._chan){if(this._track.getDesc().getOptions().loop){this._track.getDesc().getHowl().playing(this._chan)?(k.instance.traceDebug("INFO : SndInstance::onSndEnd : loop "+this._track.getDesc().getId()+" : "+this._chan),f.__instanceof(this.mode,V)||this._track.getDesc().getHowl().seek(0,this._chan)):(k.instance.traceDebug("WARNING : SndInstance::onSndEnd : broken loop, restart : "+
this._track.getDesc().getId()+" : "+this._chan),this._chan=this._track.getDesc().getHowl().play());f.__instanceof(this.mode,V)&&this._track.getDesc().getHowl().seek(((new Date).getTime()-f.__cast(this.mode,V).getSyncStartedAtTime())/1E3%this._track.getDesc().getHowl().duration(),this._chan);return}this._track.getDesc().getHowl().off("end",e(this,this.onSndEnd),this._chan)}this.doMode=null;L.getInstance().remIterator(e(this,this.onFrame));k.instance.traceDebug("INFO : SndInstance::onSndEnd : "+this._track.getDesc().getId()+
" : "+this._chan);this._track.onChanStop(this)},onSndChainEnd:function(){var a;if(this._track.getDesc().getIsLoaded()&&G.getInstance().isUnlocked()&&!G.getInstance().isPlaying(f.__cast(this.mode,U).getChainedSubId())){a=G.getInstance().getSndTracks(f.__cast(this.mode,U).getChainedSubId());for(var b=0;b<a.length;){var c=a[b];++b;c.remEndListener(e(this,this.onSndChainEnd))}k.instance.traceDebug("INFO : SndInstance::onSndChainEnd : play "+this._track.getDesc().getId());this.tryUnloadedTrackOpenChan()}},
get_chan:function(){return this._chan},get_track:function(){return this._track},__class__:Ia,__properties__:{get_chan:"get_chan",get_track:"get_track"}};var G=function(a){this._isInitEnd=this.isMute=!1;this._vol=1;this.firstSndLock=!1;this.tracks=null;this.exts=[".mp3",".ogg"];this._vol=a;Howler.init();this.tracks=new y;this.isHowlerEndInit()||L.getInstance().addIterator(e(this,this.checkHolwerEndInit))};G.__name__=!0;G.getInstance=function(a){null==a&&(a=1);null==G.current&&(G.current=new G(a));
return G.current};G.prototype={switchMute:function(a){this._isInitEnd&&Howler.mute(a);this.isMute=a},getExts:function(){return this.exts},addSndDesc:function(a,b){null==b&&(b=!1);var c=a.getId();if(this.tracks.exists(c))k.instance.traceDebug("WARNING : SndMgr::addSndDesc : sound already defined, ignore : "+a.getId());else{var c=a.getId(),d=new ta(a,b);this.tracks.set(c,d);d}},unload:function(a){for(var b=this.tracks.iterator();b.hasNext();){var c=b.next();if(null==a||-1!=c.getDesc().getId().indexOf(a)){var d=
c.getDesc().getId();this.tracks.remove(d);c.destroy()}}},play:function(a,b,c){null==c&&(c=!1);var d;k.instance.traceDebug("INFO : SndMgr::play : "+a);this.tracks.exists(a)||(k.instance.traceDebug("WARNING : SndMgr::play : unregistered sound, create new record : "+a),d=new Ha(a),d.getOptions().preload=!1,d.getOptions().autoplay=!1,d.regHowl(new Howl(d.getOptions())),d=new ta(d),this.tracks.set(a,d),d);this.isUnlocked()||this.canUnlockSound()&&c||this.tracks.get(a).getDesc().getOptions().loop?this.tracks.get(a).play(b,
!this.isUnlocked()&&!c):k.instance.traceDebug("WARNING : SndMgr::play : sounds locked, ignore "+a)},stop:function(a,b){for(var c=this.tracks.iterator();c.hasNext();){var d=c.next();if(null==a||-1!=d.getDesc().getId().indexOf(a))null!=b&&-1!=d.getDesc().getId().indexOf(b)||d.stop()}},isPlaying:function(a,b){for(var c=this.tracks.iterator();c.hasNext();){var d=c.next();if(!(null!=a&&-1==d.getDesc().getId().indexOf(a)||null!=b&&-1!=d.getDesc().getId().indexOf(b))&&d.isPlaying())return!0}return!1},getSndTracks:function(a){for(var b=
[],c=this.tracks.iterator();c.hasNext();){var d=c.next();null!=a&&-1==d.getDesc().getId().indexOf(a)||b.push(d)}return b},setVolumeCoef:function(a,b){for(var c=this.tracks.iterator();c.hasNext();){var d=c.next();null!=a&&-1==d.getDesc().getId().indexOf(a)||d.setVolumeCoef(b)}},isUnlocked:function(){return this._isInitEnd&&(!Howler.usingWebAudio||null!=Howler.ctx&&0<Howler.ctx.currentTime)},canUnlockSound:function(){return null!=Howler.ctx},checkHolwerEndInit:function(a){this.isHowlerEndInit()&&(L.getInstance().remIterator(e(this,
this.checkHolwerEndInit)),this.onHowlerEndInit())},isHowlerEndInit:function(){if(this._isInitEnd)return!0;try{return Howler.volume(this._vol),Howler.mute(this.isMute),this._isInitEnd=!0}catch(a){return a instanceof x&&(a=a.val),!1}},onHowlerEndInit:function(){k.instance.traceDebug("INFO : SndMgr::onHowlerEndInit",!0);for(var a=0,b=this.exts;a<b.length;){var c=b[a];++a;k.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : codec "+c+" : "+F.string(Howler.codecs(w.substr(c,1,null))),!0)}k.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : ctx="+
F.string(Howler.ctx),!0);null!=Howler.ctx&&k.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : ctx.time="+Howler.ctx.currentTime,!0);null!=Howler.ctx&&k.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : ctx.rate="+Howler.ctx.sampleRate,!0)},__class__:G};var ta=function(a,b){null==b&&(b=!1);this._volumeCoef=-1;this.isLoading=!1;this._desc=this._channels=this.endListeners=null;this._desc=a;this._channels=[];this.endListeners=[];b&&!this._desc.getIsLoaded()&&this.doLoad()};ta.__name__=!0;ta.prototype=
{destroy:function(){R.getInstance().freeLoadedFileMem(this._desc.getFileResId());this.stop();this._desc.getIsLoaded()&&this._desc.getHowl().unload();this.isLoading&&this.remLoadListener();this._desc.destroy();this._desc=this.endListeners=this._channels=null},getDesc:function(){return this._desc},play:function(a,b){null==b&&(b=!1);this.addSndInstance(null==a?this._desc.get_playMode():a,b)},stop:function(){for(var a=this._channels.slice(),b=0;b<a.length;){var c=a[b];++b;-1!=w.indexOf(this._channels,
c,0)&&c.stop()}},isPlaying:function(){return 0<this._channels.length},onChanStop:function(a){w.remove(this._channels,a);if(!this.isPlaying()){a=this.endListeners.slice();for(var b=0;b<a.length;){var c=a[b];++b;-1!=w.indexOf(this.endListeners,c,0)&&c()}}},addEndListener:function(a){this.endListeners.push(a)},remEndListener:function(a){w.remove(this.endListeners,a)},setVolumeCoef:function(a){this._volumeCoef=0>a?-1:a;for(var b=0,c=this._channels;b<c.length;){var d=c[b];++b;0<=d.get_chan()&&(0>a?(k.instance.traceDebug("INFO : SndTrack::setVolumeCoef : "+
this._desc.getId()+" : "+d.get_chan()+" -> "+this._desc.getHowl().volume()),this._desc.getHowl().volume(this._desc.getHowl().volume(),d.get_chan())):(k.instance.traceDebug("INFO : SndTrack::setVolumeCoef : "+this._desc.getId()+" : "+d.get_chan()+" -> "+this._desc.getHowl().volume()*a),this._desc.getHowl().volume(this._desc.getHowl().volume()*a,d.get_chan())))}},addSndInstance:function(a,b){null==b&&(b=!1);var c;c=new Ia(this);this._channels.push(c);b?c.playInvalid(a):c.play(a);this._desc.getIsLoaded()||
this.isLoading||this.doLoad()},doLoad:function(){k.instance.traceDebug("INFO : SndTrack::doLoad : "+this._desc.getId()+" : "+this._desc.getHowl().state());this.isLoading=!0;this._desc.getHowl().load();this._desc.getHowl().on("load",e(this,this.onTrackLoaded));this._desc.getHowl().on("loaderror",e(this,this.onTrackLoadError))},remLoadListener:function(){this._desc.getHowl().off("load",e(this,this.onTrackLoaded));this._desc.getHowl().off("loaderror",e(this,this.onTrackLoadError))},onTrackLoaded:function(){var a=
this._channels.length-1;k.instance.traceDebug("INFO : SndTrack::onTrackLoaded : "+this._desc.getId());R.getInstance().regLoadedFile(new ma(this._desc));this.remLoadListener();for(this.isLoading=!1;0<=a;)this._channels[a--].checkTimestampPlay()},onTrackLoadError:function(){k.instance.traceDebug("ERROR : SndTrack::onTrackLoadError : "+this._desc.getId());this.remLoadListener();this.isLoading=!1;this.stop()},get_channels:function(){return this._channels},get_volumeCoef:function(){return this._volumeCoef},
__class__:ta,__properties__:{get_volumeCoef:"get_volumeCoef",get_channels:"get_channels"}};var ba=function(a,b,c,d,g){null==g&&(g=!1);null==d&&(d=!1);this.isDown=this.autoPlay=this.isPreservFrame=this.isPause=!1;this.onDownCB=this.onReleaseCB=this.onPressCB=this.onMouseOverCB=null;this.container=a;this.onDownCB=[];this.onReleaseCB=c;this.autoPlay=d;this.isPreservFrame=g;this.onPressCB=[];this.onMouseOverCB=[];null!=b&&this.onDownCB.push(b);this.hit=a.getLayer("hit").getChildAt(0);this.hit.alpha=0;
this.hit.buttonMode=!0;this.hit.interactive=!0;this.hit.on("mousedown",e(this,this.onDown));this.hit.on("mouseover",e(this,this.onOver));this.hit.on("mouseup",e(this,this.onUp));this.hit.on("mouseout",e(this,this.onOut));this.hit.on("touchstart",e(this,this.onTDown));this.hit.on("touchmove",e(this,this.onTOver));this.hit.on("touchend",e(this,this.onTUp));this.hit.on("touchendoutside",e(this,this.onTUpOut));this.stateUp=a.getLayer("up").getChildAt(0);this.stateUp.interactive=!1;this.stateUp.visible=
!1;null!=h.getLayer("over",a)&&(this.stateOver=a.getLayer("over").getChildAt(0),this.stateOver.interactive=!1,this.stateOver.visible=!1);null!=h.getLayer("down",a)&&(this.stateDown=a.getLayer("down").getChildAt(0),this.stateDown.interactive=!1,this.stateDown.visible=!1);null!=h.getLayer("select",a)&&(this.stateSelect=a.getLayer("select").getChildAt(0),this.stateSelect.interactive=!1,this.stateSelect.visible=!1);null!=h.getLayer("selectDown",a)&&(this.stateSelectDown=a.getLayer("selectDown").getChildAt(0),
this.stateSelectDown.interactive=!1,this.stateSelectDown.visible=!1);null!=h.getLayer("selectOver",a)&&(this.stateSelectOver=a.getLayer("selectOver").getChildAt(0),this.stateSelectOver.interactive=!1,this.stateSelectOver.visible=!1);this.enableState(this.stateUp)};ba.__name__=!0;ba.prototype={destroy:function(){null!=this.curState&&this.autoPlay&&f.__instanceof(this.curState,PIXI.Container)&&h.recursiveGotoAndStop(this.curState,0);this.hit.off("mousedown",e(this,this.onDown));this.hit.off("touchstart",
e(this,this.onTDown));this.hit.off("mouseover",e(this,this.onOver));this.hit.off("touchmove",e(this,this.onTOver));this.hit.off("mouseup",e(this,this.onUp));this.hit.off("touchend",e(this,this.onTUp));this.hit.off("touchendoutside",e(this,this.onTUpOut));this.hit.off("mouseout",e(this,this.onOut));this.hit.buttonMode=!1;this.hit.interactive=!1;this.container.visible=!0;null!=this.stateUp&&(this.stateUp.visible=!0,this.stateUp=null);null!=this.stateOver&&(this.stateOver.visible=!0,this.stateOver=null);
null!=this.stateDown&&(this.stateDown.visible=!0,this.stateDown=null);null!=this.stateSelect&&(this.stateSelect.visible=!0,this.stateSelect=null);null!=this.stateSelectOver&&(this.stateSelectOver.visible=!0,this.stateSelectOver=null);null!=this.stateSelectDown&&(this.stateSelectDown.visible=!0,this.stateSelectDown=null);this.container=this.onReleaseCB=this.onDownCB=this.onMouseOverCB=this.onPressCB=this.hit=this.curState=null},addDownListener:function(a){this.onDownCB.push(a)},addPressListener:function(a){this.onPressCB.push(a)},
addMouseOverListener:function(a){this.onMouseOverCB.push(a)},getModel:function(){return this.container},getCurState:function(){return this.curState},switchEnable:function(a){this.hit.buttonMode=a;this.hit.interactive=a},switchAnim:function(a){a?this.autoPlay||(this.autoPlay=!0,!this.isPause&&null!=this.curState&&f.__instanceof(this.curState,PIXI.Container)&&h.recursivePlay(this.curState)):this.autoPlay&&(this.autoPlay=!1,!this.isPause&&null!=this.curState&&f.__instanceof(this.curState,PIXI.Container)&&
h.recursiveGotoAndStop(this.curState,0))},switchPause:function(a){this.autoPlay&&(a?this.isPause||null!=this.curState&&f.__instanceof(this.curState,PIXI.Container)&&h.recursiveStop(this.curState):this.isPause&&null!=this.curState&&f.__instanceof(this.curState,PIXI.Container)&&h.recursivePlay(this.curState));this.isPause=a},unselect:function(){null!=this.stateUp&&this.enableState(this.stateUp)},select:function(){null!=this.stateSelect&&this.enableState(this.stateSelect)},reset:function(){this.enableState(this.stateUp)},
hide:function(){this.reset();this.container.visible=!1},show:function(){this.reset();this.container.visible=!0},enableState:function(a){var b=0;return a!=this.curState?(null!=this.curState&&(this.isPreservFrame&&f.__instanceof(this.curState,q)&&(b=f.__cast(this.curState,q).get_currentFrame()),this.autoPlay&&f.__instanceof(this.curState,PIXI.Container)&&h.recursiveGotoAndStop(this.curState,0),this.curState.visible=!1),this.curState=a,null!=this.curState&&(this.curState.visible=!0,this.isPreservFrame&&
f.__instanceof(this.curState,q)&&h.recursiveGotoAndStop(this.curState,b),!this.isPause&&this.autoPlay&&f.__instanceof(this.curState,PIXI.Container)&&h.recursivePlay(this.curState)),!0):!1},isSelect:function(){return null!=this.curState&&(this.curState==this.stateSelect||this.curState==this.stateSelectDown||this.curState==this.stateSelectOver)},onTOver:function(a){this.isSelect()?null!=this.stateSelectOver&&this.isOver()?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=
this.stateOver&&this.isOver()?this.enableState(this.stateOver):this.enableState(this.stateUp)},onOver:function(a){this.isSelect()?null!=this.stateSelectOver?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=this.stateOver?this.enableState(this.stateOver):this.enableState(this.stateUp);this.callListeners(this.onMouseOverCB,a)},onTUp:function(a){this.onTUpOut(a);if(null!=this.onReleaseCB)this.onReleaseCB(a)},onTUpOut:function(a){this.isDown=!1;this.isSelect()?this.enableState(this.stateSelect):
this.enableState(this.stateUp)},onUp:function(a){this.isDown=!1;this.isSelect()?null!=this.stateSelectOver&&this.isOver()?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=this.stateOver&&this.isOver()?this.enableState(this.stateOver):this.enableState(this.stateUp);if(null!=this.onReleaseCB)this.onReleaseCB(a);this.callListeners(this.onPressCB,a)},onTDown:function(a){this.onDown(a,!1)},onDown:function(a,b){null==b&&(b=!0);this.isDown=!0;M.isOK()&&M.instance.forceCaptureDown(a,
b);this.isSelect()?null!=this.stateSelectDown?this.enableState(this.stateSelectDown):null!=this.stateSelectOver?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=this.stateDown?this.enableState(this.stateDown):null!=this.stateOver?this.enableState(this.stateOver):this.enableState(this.stateUp);this.callListeners(this.onDownCB,a);b||this.callListeners(this.onPressCB,a)},onOut:function(a){this.isDown=!1;this.enableState(this.stateUp);this.isSelect()?this.enableState(this.stateSelect):
this.enableState(this.stateUp)},isOver:function(){return!this.isDown&&(!M.isOK()||0<M.instance.getTouchOverRect(m.getContentBounds(this.hit)).length)},callListeners:function(a,b){if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c;d(b)}},__class__:ba};var h=function(){};h.__name__=!0;h.getDescMc=function(a,b){return t.get(a).library.movies.get(b)};h.getLayerWithPrefix=function(a,b,c){return h.getLayerWithPrefixInSymbol(a,h.getDescMc(b,c))};h.getLayerWithPrefixInMovie=function(a,b){return h.getLayerWithPrefixInSymbol(a,
b.symbol)};h.getLayersWithPrefixInMovie=function(a,b){return h.getLayersWithPrefixInSymbol(a,b.symbol)};h.getLayer=function(a,b){return null!=h.getLayerWithPrefixInSymbol(a,b.symbol,!0)?b.getLayer(a):null};h.getLayers=function(a){return a.symbol.layers};h.setCloneLayer=function(a,b,c){var d=a.getLayer(b),g=d.getChildAt(0),e=h.getSymbolId(g);b+="vegaClone";null!=c&&(b+=c);c=a.getChildByName(b);null==c?(null!=ga.instance&&null!=ga.instance.getAssetDescById(e)?(c=a.addChildAt(ga.instance.getAssetInstance(e),
a.getChildIndex(d)),a=f.__cast(c,T).getContent()):(c=a.addChildAt(new PIXI.Container,a.getChildIndex(d)),a=f.__instanceof(g,q)?new q(f.__cast(g,q).get_symbolId(),f.__cast(g,q).resourceId):new P(f.__cast(g,P).symbolId,f.__cast(g,P).resourceId),c.addChild(a)),c.name=b):a=c.getChildAt(0);c.x=d.x;c.y=d.y;c.skew.x=d.skew.x;c.skew.y=d.skew.y;c.alpha=d.alpha;a.x=g.x;a.y=g.y;a.scale.x=g.scale.x;a.scale.y=g.scale.y;a.pivot.x=g.pivot.x;a.pivot.y=g.pivot.y;return c};h.unsetCloneLayer=function(a,b,c){b+="vegaClone";
null!=c&&(b+=c);c=a.getChildByName(b);b=c.getChildAt(0);f.__instanceof(c,T)?(c.skew.x=0,c.skew.y=0,c.alpha=1,b.scale.x=1,b.scale.y=1,b.pivot.x=0,b.pivot.y=0,b.x=0,b.y=0,f.__cast(a.removeChild(c),T).free()):(c.removeChild(b).destroy(),a.removeChild(c).destroy())};h.unsetCloneLayers=function(a){for(var b=0,c=a.children;b<c.length;){var d=c[b];++b;-1!=d.name.indexOf("vegaClone")&&(d.name.indexOf("vegaClone")+9<d.name.length?h.unsetCloneLayer(a,function(a){a=d.name.indexOf("vegaClone");return w.substr(d.name,
0,a)}(this),function(a){a=d.name.indexOf("vegaClone")+9;return w.substr(d.name,a,null)}(this)):h.unsetCloneLayer(a,function(a){a=d.name.indexOf("vegaClone");return w.substr(d.name,0,a)}(this)))}};h.getMovieFrameTime=function(a){return t.getResourceForMovie(a).library.frameTime};h.getTextureFromSpId=function(a){var b=t.getResourceForSprite(a);a=b.library.sprites.get(a).texture;return b.textures.get(a)};h.getLayerName=function(a){if(f.__instanceof(a.parent,q)){var b=0,c;for(c=f.__cast(a.parent,q).symbol.layers;b<
c.length;){var d=c[b];++b;if(f.__cast(a.parent,q).getLayer(d.name)==a)return d.name}}return null};h.getContent=function(a,b){return a.getLayer(b).getChildAt(0)};h.getSymbolId=function(a){return f.__instanceof(a,q)?f.__cast(a,q).get_symbolId():f.__instanceof(a,P)?f.__cast(a,P).symbolId:null};h.recursiveStop=function(a){f.__instanceof(a,q)&&f.__cast(a,q).stop();var b=0;for(a=a.children;b<a.length;){var c=a[b];++b;f.__instanceof(c,PIXI.Container)&&h.recursiveStop(c)}};h.recursivePlay=function(a){f.__instanceof(a,
q)&&f.__cast(a,q).play();var b=0;for(a=a.children;b<a.length;){var c=a[b];++b;f.__instanceof(c,PIXI.Container)&&h.recursivePlay(c)}};h.recursiveGotoAndStop=function(a,b){f.__instanceof(a,q)&&f.__cast(a,q).gotoAndStop(b);for(var c=0,d=a.children;c<d.length;){var g=d[c];++c;f.__instanceof(g,PIXI.Container)&&h.recursiveGotoAndStop(g,b)}};h.recursiveSetLoop=function(a,b,c){f.__instanceof(a,q)&&f.__cast(a,q).set_loop(b);for(var d=0,g=a.children;d<g.length;){var e=g[d];++d;if(f.__instanceof(e,PIXI.Container)){if(null!=
c){a=!1;for(var k=0;k<c.length;){var l=c[k];++k;if(-1!=e.name.indexOf(l)){a=!0;break}}if(a)continue}h.recursiveSetLoop(e,b,c)}}};h.updateLayerInstanceRelativePos=function(a,b,c){var d=a.getChildAt(0);a=a.toLocal(new PIXI.Point(b,c),a.parent);d.x=a.x;d.y=a.y};h.setLayerXY=function(a,b,c){var d=a.getChildAt(0);d.x=(b-a.x)/a.scale.x;d.y=(c-a.y)/a.scale.y};h.setLayerX=function(a,b){a.getChildAt(0).x=(b-a.x)/a.scale.x};h.setLayerY=function(a,b){a.getChildAt(0).y=(b-a.y)/a.scale.y};h.getLayerX=function(a){return a.getChildAt(0).x*
a.scale.x+a.x};h.getLayerY=function(a){return a.getChildAt(0).y*a.scale.y+a.y};h.getLayerXY=function(a){var b=a.getChildAt(0);return new PIXI.Point(b.x*a.scale.x+a.x,b.y*a.scale.y+a.y)};h.recursiveApplyMask=function(a){var b,c,d,g,e;if(f.__instanceof(a,q)){b=h.getLayersWithPrefixInMovie("mask",a);for(var k=0;k<b.length;)c=b[k],++k,c=h.getLayer(c.name,a),d=a.getChildAt(a.getChildIndex(c)-1),g=a.addChildAt(new PIXI.Graphics,a.getChildIndex(c)),e=m.getParentBounds(c),g.beginFill(0,1),g.drawRect(e.x,
e.y,e.width,e.height),g.endFill(),d.mask=g,c.visible=!1}b=0;for(a=a.children;b<a.length;)k=a[b],++b,f.__instanceof(k,PIXI.Container)&&h.recursiveApplyMask(k)};h.recursiveRemoveMask=function(a){if(f.__instanceof(a,q))for(var b=0,c=a.children;b<c.length;){var d=c[b];++b;null!=d.mask&&(a.removeChild(d.mask).destroy(),d.mask=null)}b=0;for(a=a.children;b<a.length;)c=a[b],++b,f.__instanceof(c,PIXI.Container)&&h.recursiveRemoveMask(c)};h.createFullscreenBt=function(a){a=new ba(a,h.onBtFullscreen);"0"==k.instance.vars.f&&
a.hide();return a};h.onBtFullscreen=function(a){fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(window.document.documentElement))};h.getLayerWithPrefixInSymbol=function(a,b,c){null==c&&(c=!1);var d=0;for(b=b.layers;d<b.length;){var e=b[d];++d;if(c){if(e.name==a)return e}else if(0==e.name.indexOf(a))return e}return null};h.getLayersWithPrefixInSymbol=function(a,b){for(var c=[],d=0,e=b.layers;d<e.length;){var f=e[d];++d;
0==f.name.indexOf(a)&&c.push(f)}return c};var m=function(){};m.__name__=!0;m.getLocalBounds=function(a){var b=a.getLocalBounds();f.__instanceof(a,PIXI.Container)&&(b.width=f.__cast(a,PIXI.Container).width/Math.abs(a.scale.x),b.height=f.__cast(a,PIXI.Container).height/Math.abs(a.scale.y));return b};m.getParentBounds=function(a,b){var c;c=null==b?m.getLocalBounds(a):b;c.x=a.x+(0<=a.scale.x?c.x*a.scale.x:(c.x+c.width)*a.scale.x);c.width*=Math.abs(a.scale.x);c.y=a.y+(0<=a.scale.y?c.y*a.scale.y:(c.y+c.height)*
a.scale.y);c.height*=Math.abs(a.scale.y);return c};m.getContentBounds=function(a,b,c){c=null==c?k.instance.getContent():c;for(b=null==b?m.getLocalBounds(a):b;a!=c;)m.getParentBounds(a,b),a=a.parent;return b};m.contentToChild=function(a,b){for(var c=[],d=k.instance.getContent(),e,f;a!=d;)c.push([new PIXI.Point(a.x,a.y),new PIXI.Point(a.scale.x,a.scale.y)]),0!=a.rotation&&c[c.length-1].push(new PIXI.Point(Math.cos(a.rotation),Math.sin(a.rotation))),a=a.parent;for(d=c.length-1;0<=d;)2<c[d].length?(e=
b.x,f=b.y,b.x=(e*c[d][2].x+f*c[d][2].y-c[d][0].x*c[d][2].x-c[d][0].y*c[d][2].y)/c[d][1].x,b.y=(f*c[d][2].x-e*c[d][2].y+c[d][0].x*c[d][2].y-c[d][0].y*c[d][2].x)/c[d][1].y):(b.x=(b.x-c[d][0].x)/c[d][1].x,b.y=(b.y-c[d][0].y)/c[d][1].y),d--;return b};m.childToContent=function(a,b){for(var c=k.instance.getContent(),d,e,f,h;a!=c;)0!=a.rotation?(d=Math.cos(a.rotation),e=Math.sin(a.rotation),f=b.x*a.scale.x,h=b.y*a.scale.y,b.x=f*d-h*e+a.x,b.y=f*e+h*d+a.y):(b.x=b.x*a.scale.x+a.x,b.y=b.y*a.scale.y+a.y),a=a.parent;
return b};m.childToChild=function(a,b,c){return m.contentToChild(b,m.childToContent(a,c))};m.addPt=function(a,b){a.x+=b.x;a.y+=b.y;return a};m.subPt=function(a,b){return new PIXI.Point(a.x-b.x,a.y-b.y)};m.intersects=function(a,b){return a.x<=b.x+b.width&&b.x<=a.x+a.width&&a.y<=b.y+b.height&&b.y<=a.y+a.height};m.isPtInRect=function(a,b,c,d){null==d&&(d=0);return a>=c.x-d&&a<=c.x+c.width+d&&b>=c.y-d&&b<=c.y+c.height+d};m.isPtInRectExp=function(a,b,c,d){return 0>=d?m.isPtInRect(a,b,c,d):a<c.x&&b<c.y?
(a-c.x)*(a-c.x)+(b-c.y)*(b-c.y)<=d*d:a<c.x&&b>c.y+c.height?(a-c.x)*(a-c.x)+(b-c.y-c.height)*(b-c.y-c.height)<=d*d:a>c.x+c.width&&b<c.y?(a-c.x-c.width)*(a-c.x-c.width)+(b-c.y)*(b-c.y)<=d*d:a>c.x+c.width&&b>c.y+c.height?(a-c.x-c.width)*(a-c.x-c.width)+(b-c.y-c.height)*(b-c.y-c.height)<=d*d:m.isPtInRect(a,b,c,d)};m.center=function(a){a.x=-a.width/2;a.y=-a.height/2;return a};m.setQuickBt=function(a,b){a.buttonMode=!0;a.interactive=!0;a.addListener("touchstart",m.onQuickBtTouch);a.addListener("mousedown",
m.onQuickBtMouse);null==m.quickBtListeners&&(m.quickBtListeners=new K);m.quickBtListeners.set(a,b)};m.unsetQuickBt=function(a){a.removeAllListeners("touchstart");a.removeAllListeners("mousedown");a.buttonMode=!1;a.interactive=!1;m.quickBtListeners.remove(a)};m.onQuickBtTouch=function(a){M.isOK()&&M.instance.forceCaptureDown(a,!1);m.callQuickListener(a)};m.onQuickBtMouse=function(a){M.isOK()&&M.instance.forceCaptureDown(a,!0);m.callQuickListener(a)};m.callQuickListener=function(a){for(var b=a.target;null!=
b;){for(var c=m.quickBtListeners.keys();c.hasNext();){var d=c.next();if(d==b){m.quickBtListeners.h[d.__id__](a);return}}b=b.parent}k.instance.traceDebug("ERROR : UtilsPixi::callQuickListener : no registered listener found")};var z,Ma=0;Array.prototype.indexOf&&(w.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)});String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var Na={__name__:["Int"]},Oa={__name__:["Dynamic"]},
Ja=Number;Ja.__name__=["Float"];var Ka=Boolean;Ka.__ename__=["Bool"];var Pa={__name__:["Class"]},Qa={},I={};(function(){var a={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},b=["webkit","moz","o","ms","khtml"];if("undefined"!=typeof document.cancelFullScreen)a.supportsFullScreen=!0;else for(var c=0,d=b.length;c<d;c++)if(a.prefix=b[c],"undefined"!=typeof document[a.prefix+"CancelFullScreen"]){a.supportsFullScreen=
!0;break}a.supportsFullScreen&&(a.fullScreenEventName=a.prefix+"fullscreenchange",a.isFullScreen=function(){switch(this.prefix){case "":return document.fullScreen;case "webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},a.requestFullScreen=function(a){return""===this.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},a.cancelFullScreen=function(a){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});
"undefined"!=typeof jQuery&&(jQuery.requestFullScreen=function(b){b=jQuery(b);return 0<b.length&&a.supportsFullScreen?(a.requestFullScreen(b[0]),!0):!1},jQuery.cancelFullScreen=function(){a.supportsFullScreen&&a.cancelFullScreen()});window.fullScreenApi=a})();X.AUTO="auto";X.RECOMMENDED="recommended";X.CANVAS="canvas";X.WEBGL="webgl";l.MEASUREMENT_INTERVAL=1E3;l.FONT_FAMILY="Helvetica,Arial";l.FPS_BG_CLR="#00FF00";l.FPS_WARN_BG_CLR="#FF8000";l.FPS_PROB_BG_CLR="#FF0000";l.MS_BG_CLR="#FFFF00";l.MEM_BG_CLR=
"#086A87";l.INFO_BG_CLR="#00FFFF";l.FPS_TXT_CLR="#000000";l.MS_TXT_CLR="#000000";l.MEM_TXT_CLR="#FFFFFF";l.INFO_TXT_CLR="#000000";l.TOP_LEFT="TL";l.TOP_RIGHT="TR";l.BOTTOM_LEFT="BL";l.BOTTOM_RIGHT="BR";l.DELAY_TIME=4E3;ja.LABEL_ENTER="labelEnter";ja.LABEL_EXIT="labelExit";ja.LABEL_UPDATE="labelUpdate";K.count=0;f.__toStr={}.toString;t.resources=new y;Y.RENDER_FLUMP="flump";Y.RENDER_DEFAULT="default";Y.TYPE_FLUMP_MC="mc";Y.TYPE_FLUMP_SP="sp";ga.VOID_ASSET="asset_vide";Q.LOCKER_UNLOCKED="unlock_instance";
Q.LOCKER_LOCKED="lock_instance";Q.LOCKER_UNDEFINED="lock_undefined";Q.MAP_NO="map_no";Q.MAP_YES="map_yes";Q.MAP_UNDEFINED="map_undefined";u.VERSION_PARAM="v";ma.RELOAD_MAX=20;da.NO_VERSION="NO-VERSION";da.VERSION_NO_CACHE="NO-CACHE";aa.ctrTouch=0;ba.NAME_UP="up";ba.NAME_OVER="over";ba.NAME_DOWN="down";ba.NAME_SELECT="select";ba.NAME_SELECT_DOWN="selectDown";ba.NAME_SELECT_OVER="selectOver";h.LAYER_CLONE_AFFIX="vegaClone";ha.main()})("undefined"!=typeof console?console:{log:function(){}},"undefined"!=
typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
